!function(){"use strict";function e(e,a,t){var s=this;s.hostTeam={},s.teamId=null,s.currentTeamName=null,s.challengeListCount=0,s.challengeList={},s.challengeAnalysisDetail={},s.isTeamSelected=!1,s.challengeId=null,s.currentChallengeDetails={},s.currentPhase=[],s.totalSubmission={},s.totalParticipatedTeams={},s.lastSubmissionTime={};var r=e.getData("userKey"),o={};o.url="hosts/challenge_host_team/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeam=t.results)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge?mode=host",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeList=t.results,s.challengeListCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.showChallengeAnalysis=function(){if(null!=s.challengeId){o.url="challenges/challenge/"+s.challengeId+"/challenge_phase",o.method="GET",o.token=r,o.callback={onSuccess:function(n){var i=n.status,l=n.data;if(200===i){s.currentPhase=l.results;for(var u=[],c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/count",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==t.challenge_phase){s.totalSubmission[u[r]]=t.submission_count,s.totalParticipatedTeams[u[r]]=t.participant_team_count,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o);for(c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/last_submission_datetime_analysis/",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==e.data.challenge_phase){s.lastSubmissionTime[u[r]]=t.last_submission_timestamp_in_challenge_phase,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o)}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.isTeamSelected=!0;for(var n=0;n<s.challengeList.length;n++)s.challengeList[n].id==s.challengeId&&(s.currentChallengeDetails=s.challengeList[n])}else s.isTeamSelected=!1}}angular.module("evalai").controller("AnalyticsCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.isRem=!1,s.isAuth=!1,s.isMail=!0,s.userMail="",s.regUser={},s.getUser={},s.isResetPassword=!1,s.isFormError=!1,s.FormError={},s.redirectUrl={},s.isLoader=!1,s.isPassConf=!0,s.wrnMsg={},s.isValid={},s.confirmMsg="",t.loaderTitle="",s.loginContainer=angular.element(".auth-container"),s.startLoader=function(e){t.isLoader=!0,t.loaderTitle=e,s.loginContainer.addClass("low-screen")},s.stopLoader=function(){t.isLoader=!1,t.loaderTitle="",s.loginContainer.removeClass("low-screen")},s.resetForm=function(){s.regUser={},s.getUser={},s.wrnMsg={},s.isFormError=!1,s.isMail=!0},s.userSignUp=function(r){if(r){s.startLoader("Setting up your details!");var o={};o.url="auth/registration/",o.method="POST",o.data={username:s.regUser.name,password1:s.regUser.password,password2:s.regUser.confirm_password,email:s.regUser.email},o.callback={onSuccess:function(e){201==e.status&&(s.isFormError=!1,t.notify("success","Registered successfully. Please verify your email address!"),a.go("auth.login")),s.stopLoader()},onError:function(e){if(400==e.status){s.stopLoader(),s.isFormError=!0;var a,r,o,n,i;try{a=void 0!==e.data.non_field_errors,r=void 0!==e.data.username,o=void 0!==e.data.email,n=void 0!==e.data.password1,i=void 0!==e.data.password2,a?s.FormError=e.data.non_field_errors[0]:r?s.FormError=e.data.username[0]:o?s.FormError=e.data.email[0]:n?s.FormError=e.data.password1[0]:i&&(s.FormError=e.data.password2[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.userLogin=function(r){if(r){s.startLoader("Taking you to EvalAI!");var o={};o.url="auth/login/",o.method="POST",o.data={username:s.getUser.name,password:s.getUser.password},o.callback={onSuccess:function(r){200==r.status?(e.storeData("userKey",r.data.token),t.previousState?(a.go(t.previousState),s.stopLoader()):a.go("web.dashboard")):alert("Something went wrong")},onError:function(e){if(400==e.status){s.isFormError=!0;var a;try{a=void 0!==e.data.non_field_errors,a&&(s.FormError=e.data.non_field_errors[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.verifyEmail=function(){s.startLoader("Verifying Your Email");var t={};t.url="auth/registration/account-confirm-email/"+a.params.email_conf_key+"/",t.method="GET",t.callback={onSuccess:function(){s.email_verify_msg="Your email has been verified successfully",s.stopLoader()},onError:function(){s.email_verify_msg="Something went wrong!! Please try again.",s.stopLoader()}},e.sendRequest(t,"no-header")},s.resetPassword=function(a){if(a){s.startLoader("Sending Mail");var t={};t.url="auth/password/reset/",t.method="POST",t.data={email:s.getUser.email},t.callback={onSuccess:function(e){s.isMail=!1,s.getUser.error=!1,s.isFormError=!1,s.deliveredMsg=e.data.success,s.getUser.email="",s.stopLoader()},onError:function(){s.isFormError=!0,s.FormError="Something went wrong. Please try again",s.stopLoader()}},e.sendRequest(t,"no-header")}else s.stopLoader()},s.resetPasswordConfirm=function(t){if(t){s.startLoader("Resetting Your Password");var r={};r.url="auth/password/reset/confirm/",r.method="POST",r.data={new_password1:s.getUser.new_password1,new_password2:s.getUser.new_password2,uid:a.params.user_id,token:a.params.reset_token},r.callback={onSuccess:function(e){var a=e.data;s.isResetPassword=!0,s.deliveredMsg=a.detail,s.stopLoader()},onError:function(e){var a,t,r;s.isFormError=!0;try{a=void 0!==e.data.token,t=void 0!==e.data.new_password1,r=void 0!==e.data.new_password2,a?s.FormError="this link has been already used or expired.":t?s.FormError=Object.values(e.data.new_password1).join(" "):r&&(s.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){s.FormError="Something went wrong! Please refresh the page and try again."}s.stopLoader()}},e.sendRequest(r,"no-header")}else s.stopLoader()},t.$on("$stateChangeStart",function(){s.resetForm()})}angular.module("evalai").controller("AuthCtrl",e),e.$inject=["utilities","$state","$rootScope","$timeout"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey"),n=e.getData("challengeHostTeamId");r.wrnMsg={},r.isValid={},r.isFormError=!1,r.input_file=null,r.formError={},r.startLoader=a.startLoader,r.stopLoader=a.stopLoader,r.challengeCreate=function(){if(n){var a=angular.element(".file-path").val();if(null!==a&&""!==a||(r.isFormError=!0,r.formError="Please upload file!"),r.input_file){var i={};i.url="challenges/challenge/challenge_host_team/"+n+"/zip_upload/",i.method="POST";var l=new FormData;l.append("zip_configuration",r.input_file),i.data=l,i.token=o,i.callback={onSuccess:function(e){var a=e.status,r=e.data;if(201===a){angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),t.notify("success",r.success),localStorage.removeItem("challengeHostTeamId"),s.go("home")}},onError:function(e){var a=e.data;angular.element(".file-path").val(null),t.notify("error",a.error),r.stopLoader()}}}e.sendRequest(i,"header","upload")}else angular.element(".file-path").val(null),t.notify("info","Please select a challenge host team!")}}angular.module("evalai").controller("ChallengeCreateCtrl",e),e.$inject=["utilities","loaderService","$rootScope","$state"]}(),function(){"use strict";function e(e,a,t,s,r,o,n,i,l,u){var c=this;c.challengeId=o.challengeId,c.phaseId=null,c.phaseSplitId=null,c.input_file=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.wrnMsg={},c.page={},c.isParticipated=!1,c.isActive=!1,c.phases={},c.phaseSplits={},c.isValid={},c.submissionVisibility={},c.showUpdate=!1,c.showLeaderboardUpdate=!1,c.poller=null,c.isChallengeHost=!1,c.stopLeaderboard=function(){},c.stopFetchingSubmissions=function(){},c.currentDate=null,c.isExistLoader=!1,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader=a.startLoader,c.stopLoader=a.stopLoader;var d=e.getData("userKey");c.subErrors={},e.showLoader();var m={};m.url="challenges/challenge/"+c.challengeId+"/",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;if(c.page=t,c.isActive=t.is_active,null===c.page.image&&(c.page.image="dist/images/logo.png"),c.isActive){var o={};o.url="participants/participant_teams/challenges/"+c.challengeId+"/user",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(a){var t=a.data;c.currentDate=t.datetime_now;for(var o in t.challenge_participant_team_list)if(null!==t.challenge_participant_team_list[o].challenge&&t.challenge_participant_team_list[o].challenge.id==c.challengeId){c.isParticipated=!0;break}if(t.is_challenge_host&&(c.isChallengeHost=!0),!c.isParticipated){c.team={},c.teamId=null,c.existTeam={},c.currentPage="",c.isNext="",c.isPrev="",c.team.error=!1;var i={};i.url="participants/participant_team",i.method="GET",i.token=d,i.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(c.existTeam=o,e.deleteData("emailError"),null===c.existTeam.next?c.isNext="disabled":c.isNext="",null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",null!==c.existTeam.next&&(c.currentPage=c.existTeam.next.split("page=")[1]-1),c.selectExistTeam=function(){c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams");var a={};a.url="challenges/challenge/"+c.challengeId+"/participant_team/"+c.teamId,a.method="POST",a.token=d,a.callback={onSuccess:function(){c.isParticipated=!0,s.go("web.challenge-main.challenge-page.submission"),c.stopLoader()},onError:function(e){if(e.data.detail)var a="Please select a team first!";else e.data.error&&(a=e.data.error);n.notify("error",a),c.stopLoader()}},e.sendRequest(a)},c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.existTeam=a,null===c.existTeam.next?(c.isNext="disabled",c.currentPage=c.existTeam.count/10):(c.isNext="",c.currentPage=parseInt(c.existTeam.next.split("page=")[1]-1)),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(o)}e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.makeSubmission=function(){if(c.isParticipated){var a=angular.element(".file-path").val();if(null===a||""===a)c.subErrors.msg="Please upload file!";else{c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Making Submission"),c.input_file;var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",t.method="POST";var s=new FormData;s.append("status","submitting"),s.append("input_file",c.input_file),s.append("method_name",c.methodName),s.append("method_description",c.methodDesc),s.append("project_url",c.projectUrl),s.append("publication_url",c.publicationUrl),t.data=s,t.token=d,t.callback={onSuccess:function(){angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,n.notify("success","Your submission has been recorded succesfully!"),c.stopLoader()},onError:function(e){var a=e.status,t=e.data;c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.subErrors.msg=404==a?"Please select phase!":400==a?t.input_file[0]:t.error,c.stopLoader()}},e.sendRequest(t,"header","upload")}}},m={},m.url="challenges/challenge/"+c.challengeId+"/challenge_phase",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),m={},m.url="challenges/"+c.challengeId+"/challenge_phase_split",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.isResult=!1,c.getLeaderboard=function(a){c.stopLeaderboard=function(){l.cancel(c.poller)},c.stopLeaderboard(),c.isResult=!0,c.phaseSplitId=a,c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.token=d,t.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(t),c.startLeaderboard=function(){c.stopLeaderboard(),c.poller=l(function(){var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard.count!==a.results.count&&(c.showLeaderboardUpdate=!0)},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.getResults=function(a){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=a;for(var t=c.phases.results,o=0;o<c.phases.results.length;o++)if(t[o].id==a){c.currentPhaseLeaderboardPublic=t[o].leaderboard_public;break}i={},i.url="analytics/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/count",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionCount=a.submissions_count_for_challenge_phase},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(i),c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var i={};i.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.start(),0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(i),c.start=function(){c.stopFetchingSubmissions(),c.poller=l(function(){var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){for(var a=e.data,t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;if(c.submissionResult.results.length!==a.results.length)c.showUpdate=!0;else for(t=0;t<a.results.length;t++)if(a.results[t].status!==c.submissionResult.results[t].status){c.showUpdate=!0;break}},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.refreshSubmissionData=function(){c.isResult||(c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1),c.startLoader("Loading Submissions"),c.submissionResult={};var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.submissionResult=a,c.showUpdate=!1,c.stopLoader()},onError:function(){c.stopLoader()}},e.sendRequest(a)},c.refreshLeaderboard=function(){c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(a)},c.createNewTeam=function(){c.isLoader=!0,c.loaderTitle="",c.newContainer=angular.element(".new-team-card"),c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:c.team.name},a.token=d,a.callback={onSuccess:function(){n.notify("success","Team "+c.team.name+" has been created successfully!"),c.team.error=!1,c.stopLoader(),c.team.name="",c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(c.existTeam=t,c.showPagination=!0,c.paginationMsg="",null===c.existTeam.next?(c.isNext="disabled",c.currentPage=1):(c.isNext="",c.currentPage=c.existTeam.next.split("page=")[1]-1),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader())},onError:function(){c.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;c.team.error=a.team_name[0],c.stopLoader(),n.notify("error","New team couldn't be created.")}},e.sendRequest(a)},c.getAllSubmissionResults=function(t){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=t,c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var o={};o.url="challenges/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submissions",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(e){var t=e.data;c.submissionResult=t,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),null!==e){var t={Authorization:"Token "+d};r.get(e,{headers:t}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(o)},c.changeSubmissionVisibility=function(a){var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+a,t.method="PATCH",t.data={is_public:c.submissionVisibility[a]},t.token=d,t.callback={onSuccess:function(){},onError:function(){}},e.sendRequest(t)},c.showRemainingSubmissions=function(){var a={};c.remainingSubmissions={},c.remainingTime={},c.showClock=!1,c.showSubmissionNumbers=!1,a.url="jobs/"+c.challengeId+"/phases/"+c.phaseId+"/remaining_submissions",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200===a&&(t.remaining_submissions_today_count>0?(c.remainingSubmissions=t,c.showSubmissionNumbers=!0):(c.message=t,c.showClock=!0,c.countDownTimer=function(){c.remainingTime=c.message.remaining_time,c.days=Math.floor(c.remainingTime/24/60/60),c.hoursLeft=Math.floor(c.remainingTime-86400*c.days),c.hours=Math.floor(c.hoursLeft/3600),c.minutesLeft=Math.floor(c.hoursLeft-3600*c.hours),c.minutes=Math.floor(c.minutesLeft/60),c.remainingSeconds=Math.floor(c.remainingTime%60),c.remainingSeconds<10&&(c.remainingSeconds="0"+c.remainingSeconds),0===c.remainingTime?c.showSubmissionNumbers=!0:c.remainingSeconds--},setInterval(function(){n.$apply(c.countDownTimer)},1e3),c.countDownTimer()))},onError:function(){c.stopLoader(),n.notify("error","Some error occured. Please try again.")}},e.sendRequest(a)},c.fileTypes=[{name:"csv"}],c.downloadChallengeSubmissions=function(){if(c.phaseId){var a={};a.url="challenges/"+c.challengeId+"/phase/"+c.phaseId+"/download_all_submissions/"+c.fileSelected+"/",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.data;angular.element("<a/>").attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(a),download:"all_submissions.csv"})[0].click()},onError:function(e){var a=e.data;n.notify("error",a.error)}},e.sendRequest(a)}else n.notify("error","Please select a challenge phase!")},c.showMdDialog=function(e,a){for(var s=0;s<c.submissionResult.count;s++)if(c.submissionResult.results[s].id===a){c.submissionMetaData=c.submissionResult.results[s];break}c.method_name=c.submissionMetaData.method_name,c.method_description=c.submissionMetaData.method_description,c.project_url=c.submissionMetaData.project_url,c.publication_url=c.submissionMetaData.publication_url,c.submissionId=a,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/update-submission-metadata.html"})},c.updateSubmissionMetaData=function(a){if(a){var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+c.submissionId,t.method="PATCH",t.data={method_name:c.method_name,method_description:c.method_description,project_url:c.project_url,publication_url:c.publication_url},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The data is successfully updated!"))},onError:function(e){u.hide();var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else u.hide()},m={},m.url="challenges/"+c.challengeId+"/",m.method="GET",m.token=d,m.callback={onSuccess:function(e){var a=e.data;c.count=a.count||0,c.is_starred=a.is_starred,!1===a.is_starred?c.data="Star":c.data="Unstar"},onError:function(){}},e.sendRequest(m),c.starChallenge=function(){var a={};a.url="challenges/"+c.challengeId+"/",a.method="POST",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.count=a.count,c.is_starred=a.is_starred,!0===a.is_starred?c.data="Unstar":c.data="Star"},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(a)},c.overviewDialog=function(e){c.tempDesc=c.page.description,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-overview.html",escapeToClose:!1})},c.editChallengeOverview=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={description:c.page.description},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The description is successfully updated!"))},onError:function(e){u.hide(),c.page.description=c.tempDesc;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.description=c.tempDesc,u.hide()},c.submissionGuidelinesDialog=function(e){c.tempSubmissionGuidelines=c.page.submission_guidelines,console.log("ABCCCCCCCCCCCC"),console.log(c.tempTermsAndConditions),u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-submission-guidelines.html",escapeToClose:!1})},c.editSubmissionGuideline=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}console.log("BLANK"+c.page.submission_guidelines),t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={submission_guidelines:c.page.submission_guidelines},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The submission guidelines is successfully updated!"))},onError:function(e){u.hide(),c.page.submission_guidelines=c.tempSubmissionGuidelines;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.submission_guidelines=c.tempSubmissionGuidelines,u.hide()},c.evaluationCriteriaDialog=function(e){c.tempEvaluationCriteria=c.page.evaluation_details,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-criteria.html",escapeToClose:!1})},c.editEvaluationCriteria=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={evaluation_details:c.page.evaluation_details},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation details is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.evaluationScriptDialog=function(e){u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-script.html",escapeToClose:!1})},c.editEvalScript=function(a){if(a){var t={},s=new FormData;s.append("evaluation_script",c.editEvaluationScript);var r=e.getData("challengeCreator");for(var o in r)if(o==c.challengeId){c.challengeHostId=r[o];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data=s,t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation script is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t,"header","upload")}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.termsAndConditionsDialog=function(e){c.tempTermsAndConditions=c.page.terms_and_conditions,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-terms-and-conditions.html",escapeToClose:!1})},c.editTermsAndConditions=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={terms_and_conditions:c.page.terms_and_conditions},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The terms and conditions are successfully updated!"))},onError:function(e){u.hide(),c.page.terms_and_conditions=c.tempTermsAndConditions;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.terms_and_conditions=c.tempTermsAndConditions,u.hide()},c.challengeTitleDialog=function(e){c.tempChallengeTitle=c.page.title,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-title.html",escapeToClose:!1})},c.editChallengeTitle=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={title:c.page.title},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The challenge title is  successfully updated!"))},onError:function(e){u.hide(),c.page.title=c.tempChallengeTitle;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.title=c.tempChallengeTitle,u.hide()},t.$on("$destroy",function(){c.stopFetchingSubmissions(),c.stopLeaderboard()}),n.$on("$stateChangeStart",function(){c.phase={},c.isResult=!1,c.stopFetchingSubmissions(),c.stopLeaderboard()})}angular.module("evalai").controller("ChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams","$rootScope","Upload","$interval","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this,i=e.getData("userKey");e.showLoader(),n.team={},n.teamId=null,n.existTeam={},n.currentPage="",n.isNext="",n.isPrev="",n.team.error=!1,n.showPagination=!1,n.hostTeamId=null,n.challengeHostTeamId=null,n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var l={};l.url="hosts/challenge_host_team/",l.method="GET",l.token=i,l.callback={onSuccess:function(a){var t=a.status,r=a.data;200==t&&(n.existTeam=r,0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.activateCollapsible(),n.showPagination=!0,n.paginationMsg=""),e.deleteData("emailError"),null===n.existTeam.next?n.isNext="disabled":n.isNext="",null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",null!==n.existTeam.next?n.currentPage=n.existTeam.next.split("page=")[1]-1:n.currentPage=1,n.load=function(e){if(n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+i};s.get(e,{headers:a}).then(function(e){var a=e.data;n.existTeam=a,null===n.existTeam.next?(n.isNext="disabled",
n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader()})}else n.stopLoader()}),e.hideLoader()},onError:function(a){var s=a.data;e.storeData("emailError",s.detail),t.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(l),n.createNewTeam=function(){n.isLoader=!0,n.loaderTitle="",n.newContainer=angular.element(".new-team-card"),n.startLoader=function(e){n.isLoader=!0,n.loaderTitle=e,n.newContainer.addClass("low-screen")},n.stopLoader=function(){n.isLoader=!1,n.loaderTitle="",n.newContainer.removeClass("low-screen")},n.startLoader("Loading Teams");var a={};a.url="hosts/create_challenge_host_team",a.method="POST",a.data={team_name:n.team.name},a.token=i,a.callback={onSuccess:function(a){r.notify("success","New team- '"+n.team.name+"' has been created");var t=a.data;n.teamId=t.id,n.team.error=!1,n.team.name="",n.stopLoader(),n.startLoader("Loading Teams");var s={};s.url="hosts/challenge_host_team/",s.method="GET",s.token=i,s.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,n.showPagination=!0,n.paginationMsg="",null===n.existTeam.next?(n.isNext="disabled",n.currentPage=1):(n.isNext="",n.currentPage=n.existTeam.next.split("page=")[1]-1),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader())},onError:function(){n.stopLoader()}},e.sendRequest(s)},onError:function(e){var a=e.data;n.team.error=a.team_name[0],n.stopLoader(),r.notify("error","New team couldn't be created.")}},e.sendRequest(a)},n.confirmDelete=function(a,t){a.stopPropagation();var s=o.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");o.show(s).then(function(){n.startLoader();var a={};a.url="hosts/remove_self_from_challenge_host/"+t,a.method="DELETE",a.data={},a.token=i,a.callback={onSuccess:function(){n.team.error=!1,r.notify("info","You have removed yourself successfully");var a={};a.url="hosts/challenge_host_team/",a.method="GET",a.token=i,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,null===n.existTeam.next?(n.isNext="disabled",n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.showPagination=!0,n.paginationMsg="")),n.stopLoader()}},e.sendRequest(a)},onError:function(){n.stopLoader(),r.notify("error","Couldn't remove you from the challenge")}},e.sendRequest(a)},function(){})},n.inviteOthers=function(a,t){a.stopPropagation();var s=o.prompt().title("Invite others to this Team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");o.show(s).then(function(a){var s={};s.url="hosts/challenge_host_teams/"+t+"/invite",s.method="POST",s.data={email:a},s.token=i,s.callback={onSuccess:function(){r.notify("success",s.data.email+" has been invited successfully")},onError:function(){r.notify("error","Couldn't invite "+s.data.email+". Please try again.")}},e.sendRequest(s)})},n.storeChallengeHostTeamId=function(){e.storeData("challengeHostTeamId",n.challengeHostTeamId),t.go("web.challenge-create")}}angular.module("evalai").controller("ChallengeHostTeamsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e){var a=this,t=e.getData("userKey");e.showLoader(),a.currentList={},a.upcomingList={},a.pastList={},a.noneCurrentChallenge=!1,a.noneUpcomingChallenge=!1,a.nonePastChallenge=!1,a.challengeCreator={};var s={};s.url="challenges/challenge/present",s.method="GET",s.token=t,s.callback={onSuccess:function(s){var r=s.data;a.currentList=r.results,0===a.currentList.length?a.noneCurrentChallenge=!0:a.noneCurrentChallenge=!1;for(var o in a.currentList){var n=a.currentList[o].description.length;a.currentList[o].isLarge=n>=50?"...":"";var i=a.currentList[o].id;a.challengeCreator[i]=a.currentList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/future",l.method="GET",l.token=t,l.callback={onSuccess:function(s){var r=s.data;a.upcomingList=r.results,0===a.upcomingList.length?a.noneUpcomingChallenge=!0:a.noneUpcomingChallenge=!1;for(var o in a.upcomingList){var n=a.upcomingList[o].description.length;a.upcomingList[o].isLarge=n>=50?"...":"";var i=a.upcomingList[o].id;a.challengeCreator[i]=a.upcomingList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/past",l.method="GET",l.token=t,l.callback={onSuccess:function(t){var s=t.data;a.pastList=s.results,0===a.pastList.length?a.nonePastChallenge=!0:a.nonePastChallenge=!1;for(var r in a.pastList){var o=a.pastList[r].description.length;a.pastList[r].isLarge=o>=50?"...":"";var n=a.pastList[r].id;a.challengeCreator[n]=a.pastList[r].creator.id,e.storeData("challengeCreator",a.challengeCreator)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(s)}angular.module("evalai").controller("ChallengeListCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.changepassContainer=angular.element(".change-passowrd-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,r.changepassContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.changepassContainer.removeClass("low-screen")},r.changePassword=function(t){if(t){r.startLoader("Changing Your Password");var n={};n.url="auth/password/change/",n.method="POST",n.data={old_password:r.user.old_password,new_password1:r.user.new_password1,new_password2:r.user.new_password2,uid:a.params.user_id},n.token=o,n.callback={onSuccess:function(){r.user.error=!1,s.notify("success","Your password has been changed successfully!"),r.stopLoader()},onError:function(e){r.user.error="Failed",r.isFormError=!0;var a,t,s;try{a=void 0!==e.data.old_password,t=void 0!==e.data.new_password1,s=void 0!==e.data.new_password2,a?r.FormError=Object.values(e.data.old_password).join(" "):t?r.FormError=Object.values(e.data.new_password1).join(" "):s&&(r.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){r.FormError="Something went wrong! Please refresh the page and try again."}r.stopLoader()}},e.sendRequest(n)}else r.stopLoader()}}angular.module("evalai").controller("ChangePwdCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r){var o=this,n=e.getData("userKey");o.wrnMsg={},o.isValid={},o.user={},o.isFormError=!1,o.startLoader=a.startLoader,o.stopLoader=a.stopLoader;var i={};i.url="web/contact/",i.method="GET",i.token=n,i.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(o.user=t,o.isDisabled=!0)},onError:function(){}},e.sendRequest(i),o.contactUs=function(a){if(a){var s={};o.isDisabled=!1,s.url="web/contact/",s.method="POST",s.data={name:o.user.name,email:o.user.email,message:o.user.message},s.callback={onSuccess:function(e){if(201==e.status){var a=e.data.message;r.notify("success",a),t.go("home"),o.stopLoader()}},onError:function(e){if(400==e.status){o.isFormError=!0;var a,t,s;try{a=void 0!==e.data.name,t=void 0!==e.data.email,s=void 0!==e.data.message,a?o.FormError=e.data.name[0]:t?o.FormError=e.data.email[0]:s?o.FormError=e.data.message[0]:r.notify("error","Some error occured. Please try again!")}catch(e){r.notify("error","Some error occured. Please try again!")}}o.stopLoader()}},e.sendRequest(s)}}}angular.module("evalai").controller("contactUsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.hostTeam={},s.teamId=null,s.currentTeamName=null,s.challengeListCount=0,s.challengeList={},s.challengeAnalysisDetail={},s.isTeamSelected=!1,s.challengeId=null,s.currentChallengeDetails={},s.currentPhase=[],s.totalSubmission={},s.totalParticipatedTeams={},s.lastSubmissionTime={};var r=e.getData("userKey"),o={};o.url="hosts/challenge_host_team/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeam=t.results)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge?mode=host",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeList=t.results,s.challengeListCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.showChallengeAnalysis=function(){if(null!=s.challengeId){o.url="challenges/challenge/"+s.challengeId+"/challenge_phase",o.method="GET",o.token=r,o.callback={onSuccess:function(n){var i=n.status,l=n.data;if(200===i){s.currentPhase=l.results;for(var u=[],c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/count",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==t.challenge_phase){s.totalSubmission[u[r]]=t.submission_count,s.totalParticipatedTeams[u[r]]=t.participant_team_count,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o);for(c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/last_submission_datetime_analysis/",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==e.data.challenge_phase){s.lastSubmissionTime[u[r]]=t.last_submission_timestamp_in_challenge_phase,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o)}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.isTeamSelected=!0;for(var n=0;n<s.challengeList.length;n++)s.challengeList[n].id==s.challengeId&&(s.currentChallengeDetails=s.challengeList[n])}else s.isTeamSelected=!1}}angular.module("evalai").controller("AnalyticsCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.isRem=!1,s.isAuth=!1,s.isMail=!0,s.userMail="",s.regUser={},s.getUser={},s.isResetPassword=!1,s.isFormError=!1,s.FormError={},s.redirectUrl={},s.isLoader=!1,s.isPassConf=!0,s.wrnMsg={},s.isValid={},s.confirmMsg="",t.loaderTitle="",s.loginContainer=angular.element(".auth-container"),s.startLoader=function(e){t.isLoader=!0,t.loaderTitle=e,s.loginContainer.addClass("low-screen")},s.stopLoader=function(){t.isLoader=!1,t.loaderTitle="",s.loginContainer.removeClass("low-screen")},s.resetForm=function(){s.regUser={},s.getUser={},s.wrnMsg={},s.isFormError=!1,s.isMail=!0},s.userSignUp=function(r){if(r){s.startLoader("Setting up your details!");var o={};o.url="auth/registration/",o.method="POST",o.data={username:s.regUser.name,password1:s.regUser.password,password2:s.regUser.confirm_password,email:s.regUser.email},o.callback={onSuccess:function(e){201==e.status&&(s.isFormError=!1,t.notify("success","Registered successfully. Please verify your email address!"),a.go("auth.login")),s.stopLoader()},onError:function(e){if(400==e.status){s.stopLoader(),s.isFormError=!0;var a,r,o,n,i;try{a=void 0!==e.data.non_field_errors,r=void 0!==e.data.username,o=void 0!==e.data.email,n=void 0!==e.data.password1,i=void 0!==e.data.password2,a?s.FormError=e.data.non_field_errors[0]:r?s.FormError=e.data.username[0]:o?s.FormError=e.data.email[0]:n?s.FormError=e.data.password1[0]:i&&(s.FormError=e.data.password2[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.userLogin=function(r){if(r){s.startLoader("Taking you to EvalAI!");var o={};o.url="auth/login/",o.method="POST",o.data={username:s.getUser.name,password:s.getUser.password},o.callback={onSuccess:function(r){200==r.status?(e.storeData("userKey",r.data.token),t.previousState?(a.go(t.previousState),s.stopLoader()):a.go("web.dashboard")):alert("Something went wrong")},onError:function(e){if(400==e.status){s.isFormError=!0;try{void 0!==e.data.non_field_errors&&(s.FormError=e.data.non_field_errors[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.verifyEmail=function(){s.startLoader("Verifying Your Email");var t={};t.url="auth/registration/account-confirm-email/"+a.params.email_conf_key+"/",t.method="GET",t.callback={onSuccess:function(){s.email_verify_msg="Your email has been verified successfully",s.stopLoader()},onError:function(){s.email_verify_msg="Something went wrong!! Please try again.",s.stopLoader()}},e.sendRequest(t,"no-header")},s.resetPassword=function(a){if(a){s.startLoader("Sending Mail");var t={};t.url="auth/password/reset/",t.method="POST",t.data={email:s.getUser.email},t.callback={onSuccess:function(e){s.isMail=!1,s.getUser.error=!1,s.isFormError=!1,s.deliveredMsg=e.data.success,s.getUser.email="",s.stopLoader()},onError:function(){s.isFormError=!0,s.FormError="Something went wrong. Please try again",s.stopLoader()}},e.sendRequest(t,"no-header")}else s.stopLoader()},s.resetPasswordConfirm=function(t){if(t){s.startLoader("Resetting Your Password");var r={};r.url="auth/password/reset/confirm/",r.method="POST",r.data={new_password1:s.getUser.new_password1,new_password2:s.getUser.new_password2,uid:a.params.user_id,token:a.params.reset_token},r.callback={onSuccess:function(e){var a=e.data;s.isResetPassword=!0,s.deliveredMsg=a.detail,s.stopLoader()},onError:function(e){var a,t,r;s.isFormError=!0;try{a=void 0!==e.data.token,t=void 0!==e.data.new_password1,r=void 0!==e.data.new_password2,a?s.FormError="this link has been already used or expired.":t?s.FormError=Object.values(e.data.new_password1).join(" "):r&&(s.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){s.FormError="Something went wrong! Please refresh the page and try again."}s.stopLoader()}},e.sendRequest(r,"no-header")}else s.stopLoader()},t.$on("$stateChangeStart",function(){s.resetForm()})}angular.module("evalai").controller("AuthCtrl",e),e.$inject=["utilities","$state","$rootScope","$timeout"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey"),n=e.getData("challengeHostTeamId");r.wrnMsg={},r.isValid={},r.isFormError=!1,r.input_file=null,r.formError={},r.startLoader=a.startLoader,r.stopLoader=a.stopLoader,r.challengeCreate=function(){if(n){var a=angular.element(".file-path").val();if(null!==a&&""!==a||(r.isFormError=!0,r.formError="Please upload file!"),r.input_file){var i={};i.url="challenges/challenge/challenge_host_team/"+n+"/zip_upload/",i.method="POST";var l=new FormData;l.append("zip_configuration",r.input_file),i.data=l,i.token=o,i.callback={onSuccess:function(e){var a=e.status,r=e.data;201===a&&(angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),t.notify("success",r.success),localStorage.removeItem("challengeHostTeamId"),s.go("home"))},onError:function(e){var a=e.data;angular.element(".file-path").val(null),t.notify("error",a.error),r.stopLoader()}}}e.sendRequest(i,"header","upload")}else angular.element(".file-path").val(null),t.notify("info","Please select a challenge host team!")}}angular.module("evalai").controller("ChallengeCreateCtrl",e),e.$inject=["utilities","loaderService","$rootScope","$state"]}(),function(){"use strict";function e(e,a,t,s,r,o,n,i,l,u){var c=this;c.challengeId=o.challengeId,c.phaseId=null,c.phaseSplitId=null,c.input_file=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.wrnMsg={},c.page={},c.isParticipated=!1,c.isActive=!1,c.phases={},c.phaseSplits={},c.isValid={},c.submissionVisibility={},c.showUpdate=!1,c.showLeaderboardUpdate=!1,c.poller=null,c.isChallengeHost=!1,c.stopLeaderboard=function(){},c.stopFetchingSubmissions=function(){},c.currentDate=null,c.isExistLoader=!1,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader=a.startLoader,c.stopLoader=a.stopLoader;var d=e.getData("userKey");c.subErrors={},e.showLoader();var m={};m.url="challenges/challenge/"+c.challengeId+"/",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;if(c.page=t,c.isActive=t.is_active,null===c.page.image&&(c.page.image="dist/images/logo.png"),c.isActive){var o={};o.url="participants/participant_teams/challenges/"+c.challengeId+"/user",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(a){var t=a.data;c.currentDate=t.datetime_now;for(var o in t.challenge_participant_team_list)if(null!==t.challenge_participant_team_list[o].challenge&&t.challenge_participant_team_list[o].challenge.id==c.challengeId){c.isParticipated=!0;break}if(t.is_challenge_host&&(c.isChallengeHost=!0),!c.isParticipated){c.team={},c.teamId=null,c.existTeam={},c.currentPage="",c.isNext="",c.isPrev="",c.team.error=!1;var i={};i.url="participants/participant_team",i.method="GET",i.token=d,i.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(c.existTeam=o,e.deleteData("emailError"),null===c.existTeam.next?c.isNext="disabled":c.isNext="",null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",null!==c.existTeam.next&&(c.currentPage=c.existTeam.next.split("page=")[1]-1),c.selectExistTeam=function(){c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams");var a={};a.url="challenges/challenge/"+c.challengeId+"/participant_team/"+c.teamId,a.method="POST",a.token=d,a.callback={onSuccess:function(){c.isParticipated=!0,s.go("web.challenge-main.challenge-page.submission"),c.stopLoader()},onError:function(e){if(e.data.detail)var a="Please select a team first!";else e.data.error&&(a=e.data.error);n.notify("error",a),c.stopLoader()}},e.sendRequest(a)},c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.existTeam=a,null===c.existTeam.next?(c.isNext="disabled",c.currentPage=c.existTeam.count/10):(c.isNext="",c.currentPage=parseInt(c.existTeam.next.split("page=")[1]-1)),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(o)}e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.makeSubmission=function(){if(c.isParticipated){var a=angular.element(".file-path").val();if(null===a||""===a)c.subErrors.msg="Please upload file!";else{c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Making Submission"),c.input_file;var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",t.method="POST";var s=new FormData;s.append("status","submitting"),s.append("input_file",c.input_file),s.append("method_name",c.methodName),s.append("method_description",c.methodDesc),s.append("project_url",c.projectUrl),s.append("publication_url",c.publicationUrl),t.data=s,t.token=d,t.callback={onSuccess:function(){angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,n.notify("success","Your submission has been recorded succesfully!"),c.stopLoader()},onError:function(e){var a=e.status,t=e.data;c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.subErrors.msg=404==a?"Please select phase!":400==a?t.input_file[0]:t.error,c.stopLoader()}},e.sendRequest(t,"header","upload")}}},m={},m.url="challenges/challenge/"+c.challengeId+"/challenge_phase",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),m={},m.url="challenges/"+c.challengeId+"/challenge_phase_split",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.isResult=!1,c.getLeaderboard=function(a){c.stopLeaderboard=function(){l.cancel(c.poller)},c.stopLeaderboard(),c.isResult=!0,c.phaseSplitId=a,c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.token=d,t.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(t),c.startLeaderboard=function(){c.stopLeaderboard(),c.poller=l(function(){var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard.count!==a.results.count&&(c.showLeaderboardUpdate=!0)},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.getResults=function(a){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=a;for(var t=c.phases.results,o=0;o<c.phases.results.length;o++)if(t[o].id==a){c.currentPhaseLeaderboardPublic=t[o].leaderboard_public;break}i={},i.url="analytics/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/count",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionCount=a.submissions_count_for_challenge_phase},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(i),c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var i={};i.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.start(),0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(i),c.start=function(){c.stopFetchingSubmissions(),c.poller=l(function(){var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){for(var a=e.data,t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;if(c.submissionResult.results.length!==a.results.length)c.showUpdate=!0;else for(t=0;t<a.results.length;t++)if(a.results[t].status!==c.submissionResult.results[t].status){c.showUpdate=!0;break}},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.refreshSubmissionData=function(){c.isResult||(c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1),c.startLoader("Loading Submissions"),c.submissionResult={};var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.submissionResult=a,c.showUpdate=!1,c.stopLoader()},onError:function(){c.stopLoader()}},e.sendRequest(a)},c.refreshLeaderboard=function(){c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(a)},c.createNewTeam=function(){c.isLoader=!0,c.loaderTitle="",c.newContainer=angular.element(".new-team-card"),c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:c.team.name},a.token=d,a.callback={onSuccess:function(){n.notify("success","Team "+c.team.name+" has been created successfully!"),c.team.error=!1,c.stopLoader(),c.team.name="",c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(c.existTeam=t,c.showPagination=!0,c.paginationMsg="",null===c.existTeam.next?(c.isNext="disabled",c.currentPage=1):(c.isNext="",c.currentPage=c.existTeam.next.split("page=")[1]-1),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader())},onError:function(){c.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;c.team.error=a.team_name[0],c.stopLoader(),n.notify("error","New team couldn't be created.")}},e.sendRequest(a)},c.getAllSubmissionResults=function(t){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=t,c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var o={};o.url="challenges/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submissions",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(e){var t=e.data;c.submissionResult=t,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),null!==e){var t={Authorization:"Token "+d};r.get(e,{headers:t}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(o)},c.changeSubmissionVisibility=function(a){var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+a,t.method="PATCH",t.data={is_public:c.submissionVisibility[a]},t.token=d,t.callback={onSuccess:function(){},onError:function(){}},e.sendRequest(t)},c.showRemainingSubmissions=function(){var a={};c.remainingSubmissions={},c.remainingTime={},c.showClock=!1,c.showSubmissionNumbers=!1,a.url="jobs/"+c.challengeId+"/phases/"+c.phaseId+"/remaining_submissions",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200===a&&(t.remaining_submissions_today_count>0?(c.remainingSubmissions=t,c.showSubmissionNumbers=!0):(c.message=t,c.showClock=!0,c.countDownTimer=function(){c.remainingTime=c.message.remaining_time,c.days=Math.floor(c.remainingTime/24/60/60),c.hoursLeft=Math.floor(c.remainingTime-86400*c.days),c.hours=Math.floor(c.hoursLeft/3600),c.minutesLeft=Math.floor(c.hoursLeft-3600*c.hours),c.minutes=Math.floor(c.minutesLeft/60),c.remainingSeconds=Math.floor(c.remainingTime%60),c.remainingSeconds<10&&(c.remainingSeconds="0"+c.remainingSeconds),0===c.remainingTime?c.showSubmissionNumbers=!0:c.remainingSeconds--},setInterval(function(){n.$apply(c.countDownTimer)},1e3),c.countDownTimer()))},onError:function(){c.stopLoader(),n.notify("error","Some error occured. Please try again.")}},e.sendRequest(a)},c.fileTypes=[{name:"csv"}],c.downloadChallengeSubmissions=function(){if(c.phaseId){var a={};a.url="challenges/"+c.challengeId+"/phase/"+c.phaseId+"/download_all_submissions/"+c.fileSelected+"/",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.data;angular.element("<a/>").attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(a),download:"all_submissions.csv"})[0].click()},onError:function(e){var a=e.data;n.notify("error",a.error)}},e.sendRequest(a)}else n.notify("error","Please select a challenge phase!")},c.showMdDialog=function(e,a){for(var s=0;s<c.submissionResult.count;s++)if(c.submissionResult.results[s].id===a){c.submissionMetaData=c.submissionResult.results[s];break}c.method_name=c.submissionMetaData.method_name,c.method_description=c.submissionMetaData.method_description,c.project_url=c.submissionMetaData.project_url,c.publication_url=c.submissionMetaData.publication_url,c.submissionId=a,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/update-submission-metadata.html"})},c.updateSubmissionMetaData=function(a){if(a){var t={}
;t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+c.submissionId,t.method="PATCH",t.data={method_name:c.method_name,method_description:c.method_description,project_url:c.project_url,publication_url:c.publication_url},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The data is successfully updated!"))},onError:function(e){u.hide();var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else u.hide()},m={},m.url="challenges/"+c.challengeId+"/",m.method="GET",m.token=d,m.callback={onSuccess:function(e){var a=e.data;c.count=a.count||0,c.is_starred=a.is_starred,!1===a.is_starred?c.data="Star":c.data="Unstar"},onError:function(){}},e.sendRequest(m),c.starChallenge=function(){var a={};a.url="challenges/"+c.challengeId+"/",a.method="POST",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.count=a.count,c.is_starred=a.is_starred,!0===a.is_starred?c.data="Unstar":c.data="Star"},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(a)},c.overviewDialog=function(e){c.tempDesc=c.page.description,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-overview.html",escapeToClose:!1})},c.editChallengeOverview=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={description:c.page.description},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The description is successfully updated!"))},onError:function(e){u.hide(),c.page.description=c.tempDesc;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.description=c.tempDesc,u.hide()},c.submissionGuidelinesDialog=function(e){c.tempSubmissionGuidelines=c.page.submission_guidelines,console.log("ABCCCCCCCCCCCC"),console.log(c.tempTermsAndConditions),u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-submission-guidelines.html",escapeToClose:!1})},c.editSubmissionGuideline=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}console.log("BLANK"+c.page.submission_guidelines),t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={submission_guidelines:c.page.submission_guidelines},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The submission guidelines is successfully updated!"))},onError:function(e){u.hide(),c.page.submission_guidelines=c.tempSubmissionGuidelines;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.submission_guidelines=c.tempSubmissionGuidelines,u.hide()},c.evaluationCriteriaDialog=function(e){c.tempEvaluationCriteria=c.page.evaluation_details,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-criteria.html",escapeToClose:!1})},c.editEvaluationCriteria=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={evaluation_details:c.page.evaluation_details},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation details is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.evaluationScriptDialog=function(e){u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-script.html",escapeToClose:!1})},c.editEvalScript=function(a){if(a){var t={},s=new FormData;s.append("evaluation_script",c.editEvaluationScript);var r=e.getData("challengeCreator");for(var o in r)if(o==c.challengeId){c.challengeHostId=r[o];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data=s,t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation script is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t,"header","upload")}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.termsAndConditionsDialog=function(e){c.tempTermsAndConditions=c.page.terms_and_conditions,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-terms-and-conditions.html",escapeToClose:!1})},c.editTermsAndConditions=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={terms_and_conditions:c.page.terms_and_conditions},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The terms and conditions are successfully updated!"))},onError:function(e){u.hide(),c.page.terms_and_conditions=c.tempTermsAndConditions;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.terms_and_conditions=c.tempTermsAndConditions,u.hide()},c.challengeTitleDialog=function(e){c.tempChallengeTitle=c.page.title,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-title.html",escapeToClose:!1})},c.editChallengeTitle=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={title:c.page.title},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The challenge title is  successfully updated!"))},onError:function(e){u.hide(),c.page.title=c.tempChallengeTitle;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.title=c.tempChallengeTitle,u.hide()},t.$on("$destroy",function(){c.stopFetchingSubmissions(),c.stopLeaderboard()}),n.$on("$stateChangeStart",function(){c.phase={},c.isResult=!1,c.stopFetchingSubmissions(),c.stopLeaderboard()})}angular.module("evalai").controller("ChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams","$rootScope","Upload","$interval","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this,i=e.getData("userKey");e.showLoader(),n.team={},n.teamId=null,n.existTeam={},n.currentPage="",n.isNext="",n.isPrev="",n.team.error=!1,n.showPagination=!1,n.hostTeamId=null,n.challengeHostTeamId=null,n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var l={};l.url="hosts/challenge_host_team/",l.method="GET",l.token=i,l.callback={onSuccess:function(a){var t=a.status,r=a.data;200==t&&(n.existTeam=r,0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.activateCollapsible(),n.showPagination=!0,n.paginationMsg=""),e.deleteData("emailError"),null===n.existTeam.next?n.isNext="disabled":n.isNext="",null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",null!==n.existTeam.next?n.currentPage=n.existTeam.next.split("page=")[1]-1:n.currentPage=1,n.load=function(e){if(n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+i};s.get(e,{headers:a}).then(function(e){var a=e.data;n.existTeam=a,null===n.existTeam.next?(n.isNext="disabled",n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader()})}else n.stopLoader()}),e.hideLoader()},onError:function(a){var s=a.data;e.storeData("emailError",s.detail),t.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(l),n.createNewTeam=function(){n.isLoader=!0,n.loaderTitle="",n.newContainer=angular.element(".new-team-card"),n.startLoader=function(e){n.isLoader=!0,n.loaderTitle=e,n.newContainer.addClass("low-screen")},n.stopLoader=function(){n.isLoader=!1,n.loaderTitle="",n.newContainer.removeClass("low-screen")},n.startLoader("Loading Teams");var a={};a.url="hosts/create_challenge_host_team",a.method="POST",a.data={team_name:n.team.name},a.token=i,a.callback={onSuccess:function(a){r.notify("success","New team- '"+n.team.name+"' has been created");var t=a.data;n.teamId=t.id,n.team.error=!1,n.team.name="",n.stopLoader(),n.startLoader("Loading Teams");var s={};s.url="hosts/challenge_host_team/",s.method="GET",s.token=i,s.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,n.showPagination=!0,n.paginationMsg="",null===n.existTeam.next?(n.isNext="disabled",n.currentPage=1):(n.isNext="",n.currentPage=n.existTeam.next.split("page=")[1]-1),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader())},onError:function(){n.stopLoader()}},e.sendRequest(s)},onError:function(e){var a=e.data;n.team.error=a.team_name[0],n.stopLoader(),r.notify("error","New team couldn't be created.")}},e.sendRequest(a)},n.confirmDelete=function(a,t){a.stopPropagation();var s=o.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");o.show(s).then(function(){n.startLoader();var a={};a.url="hosts/remove_self_from_challenge_host/"+t,a.method="DELETE",a.data={},a.token=i,a.callback={onSuccess:function(){n.team.error=!1,r.notify("info","You have removed yourself successfully");var a={};a.url="hosts/challenge_host_team/",a.method="GET",a.token=i,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,null===n.existTeam.next?(n.isNext="disabled",n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.showPagination=!0,n.paginationMsg="")),n.stopLoader()}},e.sendRequest(a)},onError:function(){n.stopLoader(),r.notify("error","Couldn't remove you from the challenge")}},e.sendRequest(a)},function(){})},n.inviteOthers=function(a,t){a.stopPropagation();var s=o.prompt().title("Invite others to this Team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");o.show(s).then(function(a){var s={};s.url="hosts/challenge_host_teams/"+t+"/invite",s.method="POST",s.data={email:a},s.token=i,s.callback={onSuccess:function(){r.notify("success",s.data.email+" has been invited successfully")},onError:function(){r.notify("error","Couldn't invite "+s.data.email+". Please try again.")}},e.sendRequest(s)})},n.storeChallengeHostTeamId=function(){e.storeData("challengeHostTeamId",n.challengeHostTeamId),t.go("web.challenge-create")}}angular.module("evalai").controller("ChallengeHostTeamsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e){var a=this,t=e.getData("userKey");e.showLoader(),a.currentList={},a.upcomingList={},a.pastList={},a.noneCurrentChallenge=!1,a.noneUpcomingChallenge=!1,a.nonePastChallenge=!1,a.challengeCreator={};var s={};s.url="challenges/challenge/present",s.method="GET",s.token=t,s.callback={onSuccess:function(s){var r=s.data;a.currentList=r.results,0===a.currentList.length?a.noneCurrentChallenge=!0:a.noneCurrentChallenge=!1;for(var o in a.currentList){var n=a.currentList[o].description.length;a.currentList[o].isLarge=n>=50?"...":"";var i=a.currentList[o].id;a.challengeCreator[i]=a.currentList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/future",l.method="GET",l.token=t,l.callback={onSuccess:function(s){var r=s.data;a.upcomingList=r.results,0===a.upcomingList.length?a.noneUpcomingChallenge=!0:a.noneUpcomingChallenge=!1;for(var o in a.upcomingList){var n=a.upcomingList[o].description.length;a.upcomingList[o].isLarge=n>=50?"...":"";var i=a.upcomingList[o].id;a.challengeCreator[i]=a.upcomingList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/past",l.method="GET",l.token=t,l.callback={onSuccess:function(t){var s=t.data;a.pastList=s.results,0===a.pastList.length?a.nonePastChallenge=!0:a.nonePastChallenge=!1;for(var r in a.pastList){var o=a.pastList[r].description.length;a.pastList[r].isLarge=o>=50?"...":"";var n=a.pastList[r].id;a.challengeCreator[n]=a.pastList[r].creator.id,e.storeData("challengeCreator",a.challengeCreator)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(s)}angular.module("evalai").controller("ChallengeListCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.changepassContainer=angular.element(".change-passowrd-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,r.changepassContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.changepassContainer.removeClass("low-screen")},r.changePassword=function(t){if(t){r.startLoader("Changing Your Password");var n={};n.url="auth/password/change/",n.method="POST",n.data={old_password:r.user.old_password,new_password1:r.user.new_password1,new_password2:r.user.new_password2,uid:a.params.user_id},n.token=o,n.callback={onSuccess:function(){r.user.error=!1,s.notify("success","Your password has been changed successfully!"),r.stopLoader()},onError:function(e){r.user.error="Failed",r.isFormError=!0;var a,t,s;try{a=void 0!==e.data.old_password,t=void 0!==e.data.new_password1,s=void 0!==e.data.new_password2,a?r.FormError=Object.values(e.data.old_password).join(" "):t?r.FormError=Object.values(e.data.new_password1).join(" "):s&&(r.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){r.FormError="Something went wrong! Please refresh the page and try again."}r.stopLoader()}},e.sendRequest(n)}else r.stopLoader()}}angular.module("evalai").controller("ChangePwdCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r){var o=this,n=e.getData("userKey");o.wrnMsg={},o.isValid={},o.user={},o.isFormError=!1,o.startLoader=a.startLoader,o.stopLoader=a.stopLoader;var i={};i.url="web/contact/",i.method="GET",i.token=n,i.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(o.user=t,o.isDisabled=!0)},onError:function(){}},e.sendRequest(i),o.contactUs=function(a){if(a){var s={};o.isDisabled=!1,s.url="web/contact/",s.method="POST",s.data={name:o.user.name,email:o.user.email,message:o.user.message},s.callback={onSuccess:function(e){if(201==e.status){var a=e.data.message;r.notify("success",a),t.go("home"),o.stopLoader()}},onError:function(e){if(400==e.status){o.isFormError=!0;var a,t,s;try{a=void 0!==e.data.name,t=void 0!==e.data.email,s=void 0!==e.data.message,a?o.FormError=e.data.name[0]:t?o.FormError=e.data.email[0]:s?o.FormError=e.data.message[0]:r.notify("error","Some error occured. Please try again!")}catch(e){r.notify("error","Some error occured. Please try again!")}}o.stopLoader()}},e.sendRequest(s)}}}angular.module("evalai").controller("contactUsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.hostTeam={},s.teamId=null,s.currentTeamName=null,s.challengeListCount=0,s.challengeList={},s.challengeAnalysisDetail={},s.isTeamSelected=!1,s.challengeId=null,s.currentChallengeDetails={},s.currentPhase=[],s.totalSubmission={},s.totalParticipatedTeams={},s.lastSubmissionTime={};var r=e.getData("userKey"),o={};o.url="hosts/challenge_host_team/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeam=t.results)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge?mode=host",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeList=t.results,s.challengeListCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.showChallengeAnalysis=function(){if(null!=s.challengeId){o.url="challenges/challenge/"+s.challengeId+"/challenge_phase",o.method="GET",o.token=r,o.callback={onSuccess:function(n){var i=n.status,l=n.data;if(200===i){s.currentPhase=l.results;for(var u=[],c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/count",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==t.challenge_phase){s.totalSubmission[u[r]]=t.submission_count,s.totalParticipatedTeams[u[r]]=t.participant_team_count,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o);for(c=0;c<s.currentPhase.length;c++)o.url="analytics/challenge/"+s.challengeId+"/challenge_phase/"+s.currentPhase[c].id+"/last_submission_datetime_analysis/",o.method="GET",o.token=r,u.push(s.currentPhase[c].id),o.callback={onSuccess:function(e){var a=e.status,t=e.data;if(200==a)for(var r=0;r<u.length;r++)if(u[r]==e.data.challenge_phase){s.lastSubmissionTime[u[r]]=t.last_submission_timestamp_in_challenge_phase,r++;break}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o)}},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.isTeamSelected=!0;for(var n=0;n<s.challengeList.length;n++)s.challengeList[n].id==s.challengeId&&(s.currentChallengeDetails=s.challengeList[n])}else s.isTeamSelected=!1}}angular.module("evalai").controller("AnalyticsCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.isRem=!1,s.isAuth=!1,s.isMail=!0,s.userMail="",s.regUser={},s.getUser={},s.isResetPassword=!1,s.isFormError=!1,s.FormError={},s.redirectUrl={},s.isLoader=!1,s.isPassConf=!0,s.wrnMsg={},s.isValid={},s.confirmMsg="",t.loaderTitle="",s.loginContainer=angular.element(".auth-container"),s.startLoader=function(e){t.isLoader=!0,t.loaderTitle=e,s.loginContainer.addClass("low-screen")},s.stopLoader=function(){t.isLoader=!1,t.loaderTitle="",s.loginContainer.removeClass("low-screen")},s.resetForm=function(){s.regUser={},s.getUser={},s.wrnMsg={},s.isFormError=!1,s.isMail=!0},s.userSignUp=function(r){if(r){s.startLoader("Setting up your details!");var o={};o.url="auth/registration/",o.method="POST",o.data={username:s.regUser.name,password1:s.regUser.password,password2:s.regUser.confirm_password,email:s.regUser.email},o.callback={onSuccess:function(e){201==e.status&&(s.isFormError=!1,t.notify("success","Registered successfully. Please verify your email address!"),a.go("auth.login")),s.stopLoader()},onError:function(e){if(400==e.status){s.stopLoader(),s.isFormError=!0;var a,r,o,n,i;try{a=void 0!==e.data.non_field_errors,r=void 0!==e.data.username,o=void 0!==e.data.email,n=void 0!==e.data.password1,i=void 0!==e.data.password2,a?s.FormError=e.data.non_field_errors[0]:r?s.FormError=e.data.username[0]:o?s.FormError=e.data.email[0]:n?s.FormError=e.data.password1[0]:i&&(s.FormError=e.data.password2[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.userLogin=function(r){if(r){s.startLoader("Taking you to EvalAI!");var o={};o.url="auth/login/",o.method="POST",o.data={username:s.getUser.name,password:s.getUser.password},o.callback={onSuccess:function(r){200==r.status?(e.storeData("userKey",r.data.token),t.previousState?(a.go(t.previousState),s.stopLoader()):a.go("web.dashboard")):alert("Something went wrong")},onError:function(e){if(400==e.status){s.isFormError=!0;try{void 0!==e.data.non_field_errors&&(s.FormError=e.data.non_field_errors[0])}catch(e){t.notify("error",e)}}s.stopLoader()}},e.sendRequest(o,"no-header")}else s.stopLoader()},s.verifyEmail=function(){s.startLoader("Verifying Your Email");var t={};t.url="auth/registration/account-confirm-email/"+a.params.email_conf_key+"/",t.method="GET",t.callback={onSuccess:function(){s.email_verify_msg="Your email has been verified successfully",s.stopLoader()},onError:function(){s.email_verify_msg="Something went wrong!! Please try again.",s.stopLoader()}},e.sendRequest(t,"no-header")},s.resetPassword=function(a){if(a){s.startLoader("Sending Mail");var t={};t.url="auth/password/reset/",t.method="POST",t.data={email:s.getUser.email},t.callback={onSuccess:function(e){s.isMail=!1,s.getUser.error=!1,s.isFormError=!1,s.deliveredMsg=e.data.success,s.getUser.email="",s.stopLoader()},onError:function(){s.isFormError=!0,s.FormError="Something went wrong. Please try again",s.stopLoader()}},e.sendRequest(t,"no-header")}else s.stopLoader()},s.resetPasswordConfirm=function(t){if(t){s.startLoader("Resetting Your Password");var r={};r.url="auth/password/reset/confirm/",r.method="POST",r.data={new_password1:s.getUser.new_password1,new_password2:s.getUser.new_password2,uid:a.params.user_id,token:a.params.reset_token},r.callback={onSuccess:function(e){var a=e.data;s.isResetPassword=!0,s.deliveredMsg=a.detail,s.stopLoader()},onError:function(e){var a,t,r;s.isFormError=!0;try{a=void 0!==e.data.token,t=void 0!==e.data.new_password1,r=void 0!==e.data.new_password2,a?s.FormError="this link has been already used or expired.":t?s.FormError=Object.values(e.data.new_password1).join(" "):r&&(s.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){s.FormError="Something went wrong! Please refresh the page and try again."}s.stopLoader()}},e.sendRequest(r,"no-header")}else s.stopLoader()},t.$on("$stateChangeStart",function(){s.resetForm()})}angular.module("evalai").controller("AuthCtrl",e),e.$inject=["utilities","$state","$rootScope","$timeout"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey"),n=e.getData("challengeHostTeamId");r.wrnMsg={},r.isValid={},r.isFormError=!1,r.input_file=null,r.formError={},r.startLoader=a.startLoader,r.stopLoader=a.stopLoader,r.challengeCreate=function(){if(n){var a=angular.element(".file-path").val();if(null!==a&&""!==a||(r.isFormError=!0,r.formError="Please upload file!"),r.input_file){var i={};i.url="challenges/challenge/challenge_host_team/"+n+"/zip_upload/",i.method="POST";var l=new FormData;l.append("zip_configuration",r.input_file),i.data=l,i.token=o,i.callback={onSuccess:function(e){var a=e.status,r=e.data;201===a&&(angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),t.notify("success",r.success),localStorage.removeItem("challengeHostTeamId"),s.go("home"))},onError:function(e){var a=e.data;angular.element(".file-path").val(null),t.notify("error",a.error),r.stopLoader()}}}e.sendRequest(i,"header","upload")}else angular.element(".file-path").val(null),t.notify("info","Please select a challenge host team!")}}angular.module("evalai").controller("ChallengeCreateCtrl",e),e.$inject=["utilities","loaderService","$rootScope","$state"]}(),function(){"use strict";function e(e,a,t,s,r,o,n,i,l,u){var c=this;c.challengeId=o.challengeId,c.phaseId=null,c.phaseSplitId=null,c.input_file=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.wrnMsg={},c.page={},c.isParticipated=!1,c.isActive=!1,c.phases={},c.phaseSplits={},c.isValid={},c.submissionVisibility={},c.showUpdate=!1,c.showLeaderboardUpdate=!1,c.poller=null,c.isChallengeHost=!1,c.stopLeaderboard=function(){},c.stopFetchingSubmissions=function(){},c.currentDate=null,c.isExistLoader=!1,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader=a.startLoader,c.stopLoader=a.stopLoader;var d=e.getData("userKey");c.subErrors={},e.showLoader();var m={};m.url="challenges/challenge/"+c.challengeId+"/",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;if(c.page=t,c.isActive=t.is_active,null===c.page.image&&(c.page.image="dist/images/logo.png"),c.isActive){var o={};o.url="participants/participant_teams/challenges/"+c.challengeId+"/user",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(a){var t=a.data;c.currentDate=t.datetime_now;for(var o in t.challenge_participant_team_list)if(null!==t.challenge_participant_team_list[o].challenge&&t.challenge_participant_team_list[o].challenge.id==c.challengeId){c.isParticipated=!0;break}if(t.is_challenge_host&&(c.isChallengeHost=!0),!c.isParticipated){c.team={},c.teamId=null,c.existTeam={},c.currentPage="",c.isNext="",c.isPrev="",c.team.error=!1;var i={};i.url="participants/participant_team",i.method="GET",i.token=d,i.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(c.existTeam=o,e.deleteData("emailError"),null===c.existTeam.next?c.isNext="disabled":c.isNext="",null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",null!==c.existTeam.next&&(c.currentPage=c.existTeam.next.split("page=")[1]-1),c.selectExistTeam=function(){c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams");var a={};a.url="challenges/challenge/"+c.challengeId+"/participant_team/"+c.teamId,a.method="POST",a.token=d,a.callback={onSuccess:function(){c.isParticipated=!0,s.go("web.challenge-main.challenge-page.submission"),c.stopLoader()},onError:function(e){if(e.data.detail)var a="Please select a team first!";else e.data.error&&(a=e.data.error);n.notify("error",a),c.stopLoader()}},e.sendRequest(a)},c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.existTeam=a,null===c.existTeam.next?(c.isNext="disabled",c.currentPage=c.existTeam.count/10):(c.isNext="",c.currentPage=parseInt(c.existTeam.next.split("page=")[1]-1)),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(o)}e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.makeSubmission=function(){if(c.isParticipated){var a=angular.element(".file-path").val();if(null===a||""===a)c.subErrors.msg="Please upload file!";else{c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Making Submission"),c.input_file;var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",t.method="POST";var s=new FormData;s.append("status","submitting"),s.append("input_file",c.input_file),s.append("method_name",c.methodName),s.append("method_description",c.methodDesc),s.append("project_url",c.projectUrl),s.append("publication_url",c.publicationUrl),t.data=s,t.token=d,t.callback={onSuccess:function(){angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),angular.element(".file-path").val(null),c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,n.notify("success","Your submission has been recorded succesfully!"),c.stopLoader()},onError:function(e){var a=e.status,t=e.data;c.phaseId=null,c.methodName=null,c.methodDesc=null,c.projectUrl=null,c.publicationUrl=null,c.subErrors.msg=404==a?"Please select phase!":400==a?t.input_file[0]:t.error,c.stopLoader()}},e.sendRequest(t,"header","upload")}}},m={},m.url="challenges/challenge/"+c.challengeId+"/challenge_phase",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),m={},m.url="challenges/"+c.challengeId+"/challenge_phase_split",m.method="GET",m.data={},m.token=d,m.callback={onSuccess:function(a){var t=a.data;c.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(m),c.isResult=!1,c.getLeaderboard=function(a){c.stopLeaderboard=function(){l.cancel(c.poller)},c.stopLeaderboard(),c.isResult=!0,c.phaseSplitId=a,c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.token=d,t.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(t),c.startLeaderboard=function(){c.stopLeaderboard(),c.poller=l(function(){var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard.count!==a.results.count&&(c.showLeaderboardUpdate=!0)},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.getResults=function(a){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=a;for(var t=c.phases.results,o=0;o<c.phases.results.length;o++)if(t[o].id==a){c.currentPhaseLeaderboardPublic=t[o].leaderboard_public;break}i={},i.url="analytics/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/count",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionCount=a.submissions_count_for_challenge_phase},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(i),c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var i={};i.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/",i.method="GET",i.data={},i.token=d,i.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.start(),0===c.submissionResult.count?(c.showPagination=!1,
c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.isExistLoader=!0,c.loaderTitle="",c.loaderContainer=angular.element(".exist-team-card"),c.startLoader("Loading Submissions"),null!==e){var a={Authorization:"Token "+d};r.get(e,{headers:a}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(i),c.start=function(){c.stopFetchingSubmissions(),c.poller=l(function(){var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){for(var a=e.data,t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;if(c.submissionResult.results.length!==a.results.length)c.showUpdate=!0;else for(t=0;t<a.results.length;t++)if(a.results[t].status!==c.submissionResult.results[t].status){c.showUpdate=!0;break}},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(a)},5e3)}},c.refreshSubmissionData=function(){c.isResult||(c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1),c.startLoader("Loading Submissions"),c.submissionResult={};var a={};a.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/?page="+Math.ceil(c.currentPage),a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.submissionResult=a,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1;for(var t=0;t<a.results.length;t++)c.submissionVisibility[a.results[t].id]=a.results[t].is_public;c.submissionResult=a,c.showUpdate=!1,c.stopLoader()},onError:function(){c.stopLoader()}},e.sendRequest(a)},c.refreshLeaderboard=function(){c.startLoader("Loading Leaderboard Items"),c.leaderboard={};var a={};a.url="jobs/challenge_phase_split/"+c.phaseSplitId+"/leaderboard/?page_size=1000",a.method="GET",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.leaderboard=a.results,c.startLeaderboard(),c.stopLoader()},onError:function(e){var a=e.data;c.leaderboard.error=a,c.stopLoader()}},e.sendRequest(a)},c.createNewTeam=function(){c.isLoader=!0,c.loaderTitle="",c.newContainer=angular.element(".new-team-card"),c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:c.team.name},a.token=d,a.callback={onSuccess:function(){n.notify("success","Team "+c.team.name+" has been created successfully!"),c.team.error=!1,c.stopLoader(),c.team.name="",c.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(c.existTeam=t,c.showPagination=!0,c.paginationMsg="",null===c.existTeam.next?(c.isNext="disabled",c.currentPage=1):(c.isNext="",c.currentPage=c.existTeam.next.split("page=")[1]-1),null===c.existTeam.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader())},onError:function(){c.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;c.team.error=a.team_name[0],c.stopLoader(),n.notify("error","New team couldn't be created.")}},e.sendRequest(a)},c.getAllSubmissionResults=function(t){c.stopFetchingSubmissions=function(){l.cancel(c.poller)},c.stopFetchingSubmissions(),c.isResult=!0,c.phaseId=t,c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),c.isNext="",c.isPrev="",c.currentPage="",c.showPagination=!1;var o={};o.url="challenges/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submissions",o.method="GET",o.data={},o.token=d,o.callback={onSuccess:function(e){var t=e.data;c.submissionResult=t,0===c.submissionResult.count?(c.showPagination=!1,c.paginationMsg="No results found"):(c.showPagination=!0,c.paginationMsg=""),null===c.submissionResult.next?c.isNext="disabled":c.isNext="",null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",null!==c.submissionResult.next?c.currentPage=c.submissionResult.next.split("page=")[1]-1:c.currentPage=1,c.load=function(e){if(c.startLoader=a.startLoader,c.startLoader("Loading Submissions"),null!==e){var t={Authorization:"Token "+d};r.get(e,{headers:t}).then(function(e){var a=e.data;c.submissionResult=a,null===c.submissionResult.next?(c.isNext="disabled",c.currentPage=c.submissionResult.count/10):(c.isNext="",c.currentPage=parseInt(c.submissionResult.next.split("page=")[1]-1)),null===c.submissionResult.previous?c.isPrev="disabled":c.isPrev="",c.stopLoader()})}else c.stopLoader()},c.stopLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),c.stopLoader()}},e.sendRequest(o)},c.changeSubmissionVisibility=function(a){var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+a,t.method="PATCH",t.data={is_public:c.submissionVisibility[a]},t.token=d,t.callback={onSuccess:function(){},onError:function(){}},e.sendRequest(t)},c.showRemainingSubmissions=function(){var a={};c.remainingSubmissions={},c.remainingTime={},c.showClock=!1,c.showSubmissionNumbers=!1,a.url="jobs/"+c.challengeId+"/phases/"+c.phaseId+"/remaining_submissions",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200===a&&(t.remaining_submissions_today_count>0?(c.remainingSubmissions=t,c.showSubmissionNumbers=!0):(c.message=t,c.showClock=!0,c.countDownTimer=function(){c.remainingTime=c.message.remaining_time,c.days=Math.floor(c.remainingTime/24/60/60),c.hoursLeft=Math.floor(c.remainingTime-86400*c.days),c.hours=Math.floor(c.hoursLeft/3600),c.minutesLeft=Math.floor(c.hoursLeft-3600*c.hours),c.minutes=Math.floor(c.minutesLeft/60),c.remainingSeconds=Math.floor(c.remainingTime%60),c.remainingSeconds<10&&(c.remainingSeconds="0"+c.remainingSeconds),0===c.remainingTime?c.showSubmissionNumbers=!0:c.remainingSeconds--},setInterval(function(){n.$apply(c.countDownTimer)},1e3),c.countDownTimer()))},onError:function(){c.stopLoader(),n.notify("error","Some error occured. Please try again.")}},e.sendRequest(a)},c.fileTypes=[{name:"csv"}],c.downloadChallengeSubmissions=function(){if(c.phaseId){var a={};a.url="challenges/"+c.challengeId+"/phase/"+c.phaseId+"/download_all_submissions/"+c.fileSelected+"/",a.method="GET",a.token=d,a.callback={onSuccess:function(e){var a=e.data;angular.element("<a/>").attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(a),download:"all_submissions.csv"})[0].click()},onError:function(e){var a=e.data;n.notify("error",a.error)}},e.sendRequest(a)}else n.notify("error","Please select a challenge phase!")},c.showMdDialog=function(e,a){for(var s=0;s<c.submissionResult.count;s++)if(c.submissionResult.results[s].id===a){c.submissionMetaData=c.submissionResult.results[s];break}c.method_name=c.submissionMetaData.method_name,c.method_description=c.submissionMetaData.method_description,c.project_url=c.submissionMetaData.project_url,c.publication_url=c.submissionMetaData.publication_url,c.submissionId=a,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/update-submission-metadata.html"})},c.updateSubmissionMetaData=function(a){if(a){var t={};t.url="jobs/challenge/"+c.challengeId+"/challenge_phase/"+c.phaseId+"/submission/"+c.submissionId,t.method="PATCH",t.data={method_name:c.method_name,method_description:c.method_description,project_url:c.project_url,publication_url:c.publication_url},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The data is successfully updated!"))},onError:function(e){u.hide();var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else u.hide()},m={},m.url="challenges/"+c.challengeId+"/",m.method="GET",m.token=d,m.callback={onSuccess:function(e){var a=e.data;c.count=a.count||0,c.is_starred=a.is_starred,!1===a.is_starred?c.data="Star":c.data="Unstar"},onError:function(){}},e.sendRequest(m),c.starChallenge=function(){var a={};a.url="challenges/"+c.challengeId+"/",a.method="POST",a.data={},a.token=d,a.callback={onSuccess:function(e){var a=e.data;c.count=a.count,c.is_starred=a.is_starred,!0===a.is_starred?c.data="Unstar":c.data="Star"},onError:function(e){var a=e.data;n.notify("error",a)}},e.sendRequest(a)},c.overviewDialog=function(e){c.tempDesc=c.page.description,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-overview.html",escapeToClose:!1})},c.editChallengeOverview=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={description:c.page.description},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The description is successfully updated!"))},onError:function(e){u.hide(),c.page.description=c.tempDesc;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.description=c.tempDesc,u.hide()},c.submissionGuidelinesDialog=function(e){c.tempSubmissionGuidelines=c.page.submission_guidelines,console.log("ABCCCCCCCCCCCC"),console.log(c.tempTermsAndConditions),u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-submission-guidelines.html",escapeToClose:!1})},c.editSubmissionGuideline=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}console.log("BLANK"+c.page.submission_guidelines),t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={submission_guidelines:c.page.submission_guidelines},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The submission guidelines is successfully updated!"))},onError:function(e){u.hide(),c.page.submission_guidelines=c.tempSubmissionGuidelines;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.submission_guidelines=c.tempSubmissionGuidelines,u.hide()},c.evaluationCriteriaDialog=function(e){c.tempEvaluationCriteria=c.page.evaluation_details,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-criteria.html",escapeToClose:!1})},c.editEvaluationCriteria=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={evaluation_details:c.page.evaluation_details},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation details is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.evaluationScriptDialog=function(e){u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-evaluation-script.html",escapeToClose:!1})},c.editEvalScript=function(a){if(a){var t={},s=new FormData;s.append("evaluation_script",c.editEvaluationScript);var r=e.getData("challengeCreator");for(var o in r)if(o==c.challengeId){c.challengeHostId=r[o];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data=s,t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The evaluation script is successfully updated!"))},onError:function(e){u.hide(),c.page.evaluation_details=c.tempEvaluationCriteria;var a=e.data;n.notify("error",a)}},e.sendRequest(t,"header","upload")}else c.page.evaluation_details=c.tempEvaluationCriteria,u.hide()},c.termsAndConditionsDialog=function(e){c.tempTermsAndConditions=c.page.terms_and_conditions,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-terms-and-conditions.html",escapeToClose:!1})},c.editTermsAndConditions=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={terms_and_conditions:c.page.terms_and_conditions},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The terms and conditions are successfully updated!"))},onError:function(e){u.hide(),c.page.terms_and_conditions=c.tempTermsAndConditions;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.terms_and_conditions=c.tempTermsAndConditions,u.hide()},c.challengeTitleDialog=function(e){c.tempChallengeTitle=c.page.title,u.show({scope:t,preserveScope:!0,targetEvent:e,templateUrl:"dist/views/web/challenge/edit-challenge/edit-challenge-title.html",escapeToClose:!1})},c.editChallengeTitle=function(a){if(a){var t={},s=e.getData("challengeCreator");for(var r in s)if(r==c.challengeId){c.challengeHostId=s[r];break}t.url="challenges/challenge_host_team/"+c.challengeHostId+"/challenge/"+c.challengeId,t.method="PATCH",t.data={title:c.page.title},t.token=d,t.callback={onSuccess:function(e){200===e.status&&(u.hide(),n.notify("success","The challenge title is  successfully updated!"))},onError:function(e){u.hide(),c.page.title=c.tempChallengeTitle;var a=e.data;n.notify("error",a)}},e.sendRequest(t)}else c.page.title=c.tempChallengeTitle,u.hide()},t.$on("$destroy",function(){c.stopFetchingSubmissions(),c.stopLeaderboard()}),n.$on("$stateChangeStart",function(){c.phase={},c.isResult=!1,c.stopFetchingSubmissions(),c.stopLeaderboard()})}angular.module("evalai").controller("ChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams","$rootScope","Upload","$interval","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this,i=e.getData("userKey");e.showLoader(),n.team={},n.teamId=null,n.existTeam={},n.currentPage="",n.isNext="",n.isPrev="",n.team.error=!1,n.showPagination=!1,n.hostTeamId=null,n.challengeHostTeamId=null,n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var l={};l.url="hosts/challenge_host_team/",l.method="GET",l.token=i,l.callback={onSuccess:function(a){var t=a.status,r=a.data;200==t&&(n.existTeam=r,0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.activateCollapsible(),n.showPagination=!0,n.paginationMsg=""),e.deleteData("emailError"),null===n.existTeam.next?n.isNext="disabled":n.isNext="",null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",null!==n.existTeam.next?n.currentPage=n.existTeam.next.split("page=")[1]-1:n.currentPage=1,n.load=function(e){if(n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+i};s.get(e,{headers:a}).then(function(e){var a=e.data;n.existTeam=a,null===n.existTeam.next?(n.isNext="disabled",n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader()})}else n.stopLoader()}),e.hideLoader()},onError:function(a){var s=a.data;e.storeData("emailError",s.detail),t.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(l),n.createNewTeam=function(){n.isLoader=!0,n.loaderTitle="",n.newContainer=angular.element(".new-team-card"),n.startLoader=function(e){n.isLoader=!0,n.loaderTitle=e,n.newContainer.addClass("low-screen")},n.stopLoader=function(){n.isLoader=!1,n.loaderTitle="",n.newContainer.removeClass("low-screen")},n.startLoader("Loading Teams");var a={};a.url="hosts/create_challenge_host_team",a.method="POST",a.data={team_name:n.team.name},a.token=i,a.callback={onSuccess:function(a){r.notify("success","New team- '"+n.team.name+"' has been created");var t=a.data;n.teamId=t.id,n.team.error=!1,n.team.name="",n.stopLoader(),n.startLoader("Loading Teams");var s={};s.url="hosts/challenge_host_team/",s.method="GET",s.token=i,s.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,n.showPagination=!0,n.paginationMsg="",null===n.existTeam.next?(n.isNext="disabled",n.currentPage=1):(n.isNext="",n.currentPage=n.existTeam.next.split("page=")[1]-1),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",n.stopLoader())},onError:function(){n.stopLoader()}},e.sendRequest(s)},onError:function(e){var a=e.data;n.team.error=a.team_name[0],n.stopLoader(),r.notify("error","New team couldn't be created.")}},e.sendRequest(a)},n.confirmDelete=function(a,t){a.stopPropagation();var s=o.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");o.show(s).then(function(){n.startLoader();var a={};a.url="hosts/remove_self_from_challenge_host/"+t,a.method="DELETE",a.data={},a.token=i,a.callback={onSuccess:function(){n.team.error=!1,r.notify("info","You have removed yourself successfully");var a={};a.url="hosts/challenge_host_team/",a.method="GET",a.token=i,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(n.existTeam=t,null===n.existTeam.next?(n.isNext="disabled",n.currentPage=n.existTeam.count/10):(n.isNext="",n.currentPage=parseInt(n.existTeam.next.split("page=")[1]-1)),null===n.existTeam.previous?n.isPrev="disabled":n.isPrev="",0===n.existTeam.count?(n.showPagination=!1,n.paginationMsg="No team exists for now, start by creating a new team!"):(n.showPagination=!0,n.paginationMsg="")),n.stopLoader()}},e.sendRequest(a)},onError:function(){n.stopLoader(),r.notify("error","Couldn't remove you from the challenge")}},e.sendRequest(a)},function(){})},n.inviteOthers=function(a,t){a.stopPropagation();var s=o.prompt().title("Invite others to this Team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");o.show(s).then(function(a){var s={};s.url="hosts/challenge_host_teams/"+t+"/invite",s.method="POST",s.data={email:a},s.token=i,s.callback={onSuccess:function(){r.notify("success",s.data.email+" has been invited successfully")},onError:function(){r.notify("error","Couldn't invite "+s.data.email+". Please try again.")}},e.sendRequest(s)})},n.storeChallengeHostTeamId=function(){e.storeData("challengeHostTeamId",n.challengeHostTeamId),t.go("web.challenge-create")}}angular.module("evalai").controller("ChallengeHostTeamsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e){var a=this,t=e.getData("userKey");e.showLoader(),a.currentList={},a.upcomingList={},a.pastList={},a.noneCurrentChallenge=!1,a.noneUpcomingChallenge=!1,a.nonePastChallenge=!1,a.challengeCreator={};var s={};s.url="challenges/challenge/present",s.method="GET",s.token=t,s.callback={onSuccess:function(s){var r=s.data;a.currentList=r.results,0===a.currentList.length?a.noneCurrentChallenge=!0:a.noneCurrentChallenge=!1;for(var o in a.currentList){var n=a.currentList[o].description.length;a.currentList[o].isLarge=n>=50?"...":"";var i=a.currentList[o].id;a.challengeCreator[i]=a.currentList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/future",l.method="GET",l.token=t,l.callback={onSuccess:function(s){var r=s.data;a.upcomingList=r.results,0===a.upcomingList.length?a.noneUpcomingChallenge=!0:a.noneUpcomingChallenge=!1;for(var o in a.upcomingList){var n=a.upcomingList[o].description.length;a.upcomingList[o].isLarge=n>=50?"...":"";var i=a.upcomingList[o].id;a.challengeCreator[i]=a.upcomingList[o].creator.id,e.storeData("challengeCreator",a.challengeCreator)}var l={};l.url="challenges/challenge/past",l.method="GET",l.token=t,l.callback={onSuccess:function(t){var s=t.data;a.pastList=s.results,0===a.pastList.length?a.nonePastChallenge=!0:a.nonePastChallenge=!1;for(var r in a.pastList){var o=a.pastList[r].description.length;a.pastList[r].isLarge=o>=50?"...":"";var n=a.pastList[r].id;a.challengeCreator[n]=a.pastList[r].creator.id,e.storeData("challengeCreator",a.challengeCreator)}e.hideLoader()},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(l)},onError:function(){e.hideLoader()}},e.sendRequest(s)}angular.module("evalai").controller("ChallengeListCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.changepassContainer=angular.element(".change-passowrd-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,r.changepassContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.changepassContainer.removeClass("low-screen")},r.changePassword=function(t){if(t){r.startLoader("Changing Your Password");var n={};n.url="auth/password/change/",n.method="POST",n.data={old_password:r.user.old_password,new_password1:r.user.new_password1,new_password2:r.user.new_password2,uid:a.params.user_id},n.token=o,n.callback={onSuccess:function(){r.user.error=!1,s.notify("success","Your password has been changed successfully!"),r.stopLoader()},onError:function(e){r.user.error="Failed",r.isFormError=!0;var a,t,s;try{a=void 0!==e.data.old_password,t=void 0!==e.data.new_password1,s=void 0!==e.data.new_password2,a?r.FormError=Object.values(e.data.old_password).join(" "):t?r.FormError=Object.values(e.data.new_password1).join(" "):s&&(r.FormError=Object.values(e.data.new_password2).join(" "))}catch(e){r.FormError="Something went wrong! Please refresh the page and try again."}r.stopLoader()}},e.sendRequest(n)}else r.stopLoader()}}angular.module("evalai").controller("ChangePwdCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r){var o=this,n=e.getData("userKey");o.wrnMsg={},o.isValid={},o.user={},o.isFormError=!1,o.startLoader=a.startLoader,o.stopLoader=a.stopLoader;var i={};i.url="web/contact/",i.method="GET",i.token=n,i.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(o.user=t,o.isDisabled=!0)},onError:function(){}},e.sendRequest(i),o.contactUs=function(a){if(a){var s={};o.isDisabled=!1,s.url="web/contact/",s.method="POST",s.data={name:o.user.name,email:o.user.email,message:o.user.message},s.callback={onSuccess:function(e){if(201==e.status){var a=e.data.message;r.notify("success",a),t.go("home"),o.stopLoader()}},onError:function(e){if(400==e.status){o.isFormError=!0;var a,t,s;try{a=void 0!==e.data.name,t=void 0!==e.data.email,s=void 0!==e.data.message,a?o.FormError=e.data.name[0]:t?o.FormError=e.data.email[0]:s?o.FormError=e.data.message[0]:r.notify("error","Some error occured. Please try again!")}catch(e){r.notify("error","Some error occured. Please try again!")}}o.stopLoader()}},e.sendRequest(s)}}}angular.module("evalai").controller("contactUsCtrl",e),e.$inject=["utilities","loaderService","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.challengeCount=0,s.hostTeamCount=0,s.hostTeamExist=!1,s.participatedTeamCount=0;var r=e.getData("userKey");s.redirectUrl={};var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.name=t.username)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge/present",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeCount=t.results.length,0==s.hostTeamCount?s.hostTeamExist=!1:s.hostTeamExist=!0)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="hosts/challenge_host_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="participants/participant_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.participatedTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.hostChallenge=function(){a.go("web.challenge-host-teams")}}angular.module("evalai").controller("DashCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this;n.challengeId=o.challengeId,n.phaseSplitId=o.phaseSplitId,n.phaseId=null,n.wrnMsg={},n.page={},n.phases={},n.phaseSplits={},n.isValid={},n.isActive=!1,n.showUpdate=!1,n.showLeaderboardUpdate=!1,n.poller=null,n.stopLeaderboard=function(){},n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.subErrors={},e.showLoader();var i={};i.url="challenges/challenge/"+n.challengeId+"/",i.method="GET",i.data={},i.callback={onSuccess:function(e){var a=e.data;n.page=a,n.isActive=a.is_active,null===n.page.image&&(n.page.image="dist/images/logo.png")},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/challenge/"+n.challengeId+"/challenge_phase",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/"+n.challengeId+"/challenge_phase_split",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),n.getLeaderboard=function(a){n.isResult=!0,n.phaseSplitId=a,n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Leaderboard Items"),n.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+n.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.callback={onSuccess:function(e){var a=e.data;n.leaderboard=a.results,n.phase_name=n.phaseSplitId,n.stopLoader()},onError:function(e){var a=e.data;n.leaderboard.error=a,n.stopLoader()}},e.sendRequest(t)},n.phaseSplitId&&n.getLeaderboard(n.phaseSplitId)}angular.module("evalai").controller("FeaturedChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams"]}(),function(){"use strict";function e(e,a,t){var s=this;s.user={},s.challengeList=[],s.isChallenge=!0,s.isMore=!1,s.redirectUrl={},s.getChallenge=function(){var a={};a.url="challenges/challenge/present",a.method="GET",a.token=null,a.callback={onSuccess:function(e){s.challengeList=e.data,0===s.challengeList.count?s.isChallenge=!1:(s.isChallenge=!0,s.featuredChallenge=s.challengeList.results[0],s.featuredChallenge.description.length>120?s.isMore=!0:s.isMore=!1)},onError:function(){}},e.sendRequest(a)},s.init=function(){var r=e.getData("userKey");if(r){var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.user.name=t.username)},onError:function(s){401==s.status&&(e.resetStorage(),t.go("auth.login"),a.isAuth=!1)}},e.sendRequest(o)}},s.hostChallenge=function(){!0===a.isAuth?t.go("web.challenge-host-teams"):(t.go("auth.login"),a.previousState="web.challenge-host-teams")},s.profileDropdown=function(){angular.element(".dropdown-button").dropdown()},s.init(),s.getChallenge()}angular.module("evalai").controller("MainCtrl",e),e.$inject=["utilities","$rootScope","$state"]}(),function(){"use strict";function e(e){var a=this,t={};t.url="web/team/",t.method="GET",t.callback={onSuccess:function(e){var t=e.status,s=e.data;if(200==t)if(0!==s.length)for(var r=[],o=[],n=0;n<s.length;n++)"Core Team"===s[n].team_type?(a.coreTeamType=s[n].team_type,a.coreTeamList=r.push(s[n])):"Contributor"===s[n].team_type&&(a.contributingTeamType=s[n].team_type,a.contributingTeamList=o.push(s[n])),a.coreTeamDetails=r,a.contributingTeamDetails=o;else a.noTeamDisplay="Team will be updated very soon !"},onError:function(){}},e.sendRequest(t,"no-header")}angular.module("evalai").controller("ourTeamCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e){this.emailError=e.getData("emailError")}angular.module("evalai").controller("PermCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a){var t=this;t.user={},t.countLeft=0,t.compPerc=0;var s=0;e.hideLoader(),t.imgUrlObj={profilePic:"dist/images/spaceman.png"},e.getData("avatar")?t.imgUrl=e.getData("avatar"):(t.imgUrl=_.sample(t.imgUrlObj),e.storeData("avatar",t.imgUrl));var r=e.getData("userKey"),o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,r=e.data;if(200==a){for(var o in r)""!==r[o]&&void 0!==r[o]&&null!==r[o]||(r[o]="-",t.countLeft=t.countLeft+1),s+=1;t.compPerc=parseInt(t.countLeft/s*100),t.user=r,t.user.complete=100-t.compPerc}},onError:function(){a.notify("error","Some error have occured , please try again !")}},e.sendRequest(o)}angular.module("evalai").controller("profileCtrl",e),e.$inject=["utilities","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o,n){var i=this,l=e.getData("userKey");e.showLoader(),i.team={},i.teamId=null,i.existTeam={},i.currentPage="",i.isNext="",i.isPrev="",i.team.error=!1,i.showPagination=!1,i.isExistLoader=!1,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader=a.startLoader,i.stopLoader=a.stopLoader,i.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var u={};u.url="participants/participant_team",u.method="GET",u.token=l,u.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(i.existTeam=o,0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.activateCollapsible(),i.showPagination=!0,i.paginationMsg=""),e.deleteData("emailError"),null===i.existTeam.next?i.isNext="disabled":i.isNext="",null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",null!==i.existTeam.next?i.currentPage=i.existTeam.next.split("page=")[1]-1:i.currentPage=1,i.selectExistTeam=function(){
i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams");var a={};a.url="challenges/challenge/1/participant_team/"+i.teamId,a.method="POST",a.token=l,a.callback={onSuccess:function(){s.go("web.challenge-page.overview"),i.stopLoader()},onError:function(){i.existTeamError="Please select a team",i.stopLoader()}},e.sendRequest(a)},i.load=function(e){if(i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+l};r.get(e,{headers:a}).then(function(e){var a=e.data;i.existTeam=a,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader()})}else i.stopLoader()}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(u),i.createNewTeam=function(){i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".new-team-card"),i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:i.team.name},a.token=l,a.callback={onSuccess:function(){o.notify("success","Team "+i.team.name+" has been created successfully!"),i.team.error=!1,i.stopLoader(),i.team.name="",i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,i.showPagination=!0,i.paginationMsg="",null===i.existTeam.next?(i.isNext="disabled",i.currentPage=1):(i.isNext="",i.currentPage=i.existTeam.next.split("page=")[1]-1),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader())},onError:function(){i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;i.team.error=a.team_name[0],i.stopLoader(),o.notify("error","New team couldn't be created.")}},e.sendRequest(a)},i.confirmDelete=function(a,t){a.stopPropagation();var s=n.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");n.show(s).then(function(){i.startLoader();var a={};a.url="participants/remove_self_from_participant_team/"+t,a.method="DELETE",a.data={},a.token=l,a.callback={onSuccess:function(){i.team.error=!1,o.notify("info","You have removed yourself successfully");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.showPagination=!0,i.paginationMsg="")),i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data.error;i.stopLoader(),o.notify("error",a)}},e.sendRequest(a)},function(){})},i.inviteOthers=function(a,t){a.stopPropagation();var s=n.prompt().title("Invite others to this team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");n.show(s).then(function(a){var s={};s.url="participants/participant_team/"+t+"/invite",s.method="POST",s.data={email:a},s.token=l,s.callback={onSuccess:function(e){var a=e.data.message;o.notify("success",a)},onError:function(e){var a=e.data.error;o.notify("error",a)}},e.sendRequest(s)},function(){})}}angular.module("evalai").controller("TeamsCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.updateprofileContainer=angular.element(".update-profile-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,r.updateprofileContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.updateprofileContainer.removeClass("low-screen")};var n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.user=t)},onError:function(){s.notify("error","Error in loading profile, please try again later !")}},e.sendRequest(n),r.updateProfile=function(t){if(t){r.startLoader("Updating Your Profile");var n={};n.url="auth/user/",n.method="PUT",n.data={username:r.user.username,first_name:r.user.first_name,last_name:r.user.last_name},n.token=o,n.callback={onSuccess:function(e){200==e.status&&(s.notify("success","Profile updated successfully!"),a.go("web.profile"),r.stopLoader())},onError:function(e){if(400==e.status){r.stopLoader(),r.isFormError=!0;var a,t,o;try{a=void 0!==e.data.username,t=void 0!==e.data.first_name,o=void 0!==e.data.last_name,a?r.FormError=e.data.username[0]:t?r.FormError=e.data.first_name[0]:o?r.FormError=e.data.last_name[0]:s.notify("error","Some error have occured . Please try again !")}catch(e){s.notify("error","Some error have occured . Please try again !")}}r.stopLoader()}},e.sendRequest(n)}else s.notify("error","Form fields are not valid!"),r.stopLoader()}}angular.module("evalai").controller("updateProfileCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s){var r=this;r.user={},e.hideLoader(),angular.element().find(".side-intro").addClass("z-depth-3");var o=e.getData("userKey"),n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.name=t.username)},onError:function(){s.notify("error","Some error have occured , please try again !")}},e.sendRequest(n)}angular.module("evalai").controller("WebCtrl",e),e.$inject=["utilities","$state","$stateParams","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.challengeCount=0,s.hostTeamCount=0,s.hostTeamExist=!1,s.participatedTeamCount=0;var r=e.getData("userKey");s.redirectUrl={};var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.name=t.username)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge/present",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeCount=t.results.length,0==s.hostTeamCount?s.hostTeamExist=!1:s.hostTeamExist=!0)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="hosts/challenge_host_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="participants/participant_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.participatedTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.hostChallenge=function(){a.go("web.challenge-host-teams")}}angular.module("evalai").controller("DashCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this;n.challengeId=o.challengeId,n.phaseSplitId=o.phaseSplitId,n.phaseId=null,n.wrnMsg={},n.page={},n.phases={},n.phaseSplits={},n.isValid={},n.isActive=!1,n.showUpdate=!1,n.showLeaderboardUpdate=!1,n.poller=null,n.stopLeaderboard=function(){},n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.subErrors={},e.showLoader();var i={};i.url="challenges/challenge/"+n.challengeId+"/",i.method="GET",i.data={},i.callback={onSuccess:function(e){var a=e.data;n.page=a,n.isActive=a.is_active,null===n.page.image&&(n.page.image="dist/images/logo.png")},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/challenge/"+n.challengeId+"/challenge_phase",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/"+n.challengeId+"/challenge_phase_split",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),n.getLeaderboard=function(a){n.isResult=!0,n.phaseSplitId=a,n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Leaderboard Items"),n.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+n.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.callback={onSuccess:function(e){var a=e.data;n.leaderboard=a.results,n.phase_name=n.phaseSplitId,n.stopLoader()},onError:function(e){var a=e.data;n.leaderboard.error=a,n.stopLoader()}},e.sendRequest(t)},n.phaseSplitId&&n.getLeaderboard(n.phaseSplitId)}angular.module("evalai").controller("FeaturedChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams"]}(),function(){"use strict";function e(e,a,t){var s=this;s.user={},s.challengeList=[],s.isChallenge=!0,s.isMore=!1,s.redirectUrl={},s.getChallenge=function(){var a={};a.url="challenges/challenge/present",a.method="GET",a.token=null,a.callback={onSuccess:function(e){s.challengeList=e.data,0===s.challengeList.count?s.isChallenge=!1:(s.isChallenge=!0,s.featuredChallenge=s.challengeList.results[0],s.featuredChallenge.description.length>120?s.isMore=!0:s.isMore=!1)},onError:function(){}},e.sendRequest(a)},s.init=function(){var r=e.getData("userKey");if(r){var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.user.name=t.username)},onError:function(s){401==s.status&&(e.resetStorage(),t.go("auth.login"),a.isAuth=!1)}},e.sendRequest(o)}},s.hostChallenge=function(){!0===a.isAuth?t.go("web.challenge-host-teams"):(t.go("auth.login"),a.previousState="web.challenge-host-teams")},s.profileDropdown=function(){angular.element(".dropdown-button").dropdown()},s.init(),s.getChallenge()}angular.module("evalai").controller("MainCtrl",e),e.$inject=["utilities","$rootScope","$state"]}(),function(){"use strict";function e(e){var a=this,t={};t.url="web/team/",t.method="GET",t.callback={onSuccess:function(e){var t=e.status,s=e.data;if(200==t)if(0!==s.length)for(var r=[],o=[],n=0;n<s.length;n++)"Core Team"===s[n].team_type?(a.coreTeamType=s[n].team_type,a.coreTeamList=r.push(s[n])):"Contributor"===s[n].team_type&&(a.contributingTeamType=s[n].team_type,a.contributingTeamList=o.push(s[n])),a.coreTeamDetails=r,a.contributingTeamDetails=o;else a.noTeamDisplay="Team will be updated very soon !"},onError:function(){}},e.sendRequest(t,"no-header")}angular.module("evalai").controller("ourTeamCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e){this.emailError=e.getData("emailError")}angular.module("evalai").controller("PermCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a){var t=this;t.user={},t.countLeft=0,t.compPerc=0;var s=0;e.hideLoader(),t.imgUrlObj={profilePic:"dist/images/spaceman.png"},e.getData("avatar")?t.imgUrl=e.getData("avatar"):(t.imgUrl=_.sample(t.imgUrlObj),e.storeData("avatar",t.imgUrl));var r=e.getData("userKey"),o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,r=e.data;if(200==a){for(var o in r)""!==r[o]&&void 0!==r[o]&&null!==r[o]||(r[o]="-",t.countLeft=t.countLeft+1),s+=1;t.compPerc=parseInt(t.countLeft/s*100),t.user=r,t.user.complete=100-t.compPerc}},onError:function(){a.notify("error","Some error have occured , please try again !")}},e.sendRequest(o)}angular.module("evalai").controller("profileCtrl",e),e.$inject=["utilities","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o,n){var i=this,l=e.getData("userKey");e.showLoader(),i.team={},i.teamId=null,i.existTeam={},i.currentPage="",i.isNext="",i.isPrev="",i.team.error=!1,i.showPagination=!1,i.isExistLoader=!1,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader=a.startLoader,i.stopLoader=a.stopLoader,i.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var u={};u.url="participants/participant_team",u.method="GET",u.token=l,u.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(i.existTeam=o,0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.activateCollapsible(),i.showPagination=!0,i.paginationMsg=""),e.deleteData("emailError"),null===i.existTeam.next?i.isNext="disabled":i.isNext="",null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",null!==i.existTeam.next?i.currentPage=i.existTeam.next.split("page=")[1]-1:i.currentPage=1,i.selectExistTeam=function(){i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams");var a={};a.url="challenges/challenge/1/participant_team/"+i.teamId,a.method="POST",a.token=l,a.callback={onSuccess:function(){s.go("web.challenge-page.overview"),i.stopLoader()},onError:function(){i.existTeamError="Please select a team",i.stopLoader()}},e.sendRequest(a)},i.load=function(e){if(i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+l};r.get(e,{headers:a}).then(function(e){var a=e.data;i.existTeam=a,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader()})}else i.stopLoader()}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(u),i.createNewTeam=function(){i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".new-team-card"),i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:i.team.name},a.token=l,a.callback={onSuccess:function(){o.notify("success","Team "+i.team.name+" has been created successfully!"),i.team.error=!1,i.stopLoader(),i.team.name="",i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,i.showPagination=!0,i.paginationMsg="",null===i.existTeam.next?(i.isNext="disabled",i.currentPage=1):(i.isNext="",i.currentPage=i.existTeam.next.split("page=")[1]-1),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader())},onError:function(){i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;i.team.error=a.team_name[0],i.stopLoader(),o.notify("error","New team couldn't be created.")}},e.sendRequest(a)},i.confirmDelete=function(a,t){a.stopPropagation();var s=n.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");n.show(s).then(function(){i.startLoader();var a={};a.url="participants/remove_self_from_participant_team/"+t,a.method="DELETE",a.data={},a.token=l,a.callback={onSuccess:function(){i.team.error=!1,o.notify("info","You have removed yourself successfully");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.showPagination=!0,i.paginationMsg="")),i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data.error;i.stopLoader(),o.notify("error",a)}},e.sendRequest(a)},function(){})},i.inviteOthers=function(a,t){a.stopPropagation();var s=n.prompt().title("Invite others to this team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");n.show(s).then(function(a){var s={};s.url="participants/participant_team/"+t+"/invite",s.method="POST",s.data={email:a},s.token=l,s.callback={onSuccess:function(e){var a=e.data.message;o.notify("success",a)},onError:function(e){var a=e.data.error;o.notify("error",a)}},e.sendRequest(s)},function(){})}}angular.module("evalai").controller("TeamsCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.updateprofileContainer=angular.element(".update-profile-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,r.updateprofileContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.updateprofileContainer.removeClass("low-screen")};var n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.user=t)},onError:function(){s.notify("error","Error in loading profile, please try again later !")}},e.sendRequest(n),r.updateProfile=function(t){if(t){r.startLoader("Updating Your Profile");var n={};n.url="auth/user/",n.method="PUT",n.data={username:r.user.username,first_name:r.user.first_name,last_name:r.user.last_name},n.token=o,n.callback={onSuccess:function(e){200==e.status&&(s.notify("success","Profile updated successfully!"),a.go("web.profile"),r.stopLoader())},onError:function(e){if(400==e.status){r.stopLoader(),r.isFormError=!0;var a,t,o;try{a=void 0!==e.data.username,t=void 0!==e.data.first_name,o=void 0!==e.data.last_name,a?r.FormError=e.data.username[0]:t?r.FormError=e.data.first_name[0]:o?r.FormError=e.data.last_name[0]:s.notify("error","Some error have occured . Please try again !")}catch(e){s.notify("error","Some error have occured . Please try again !")}}r.stopLoader()}},e.sendRequest(n)}else s.notify("error","Form fields are not valid!"),r.stopLoader()}}angular.module("evalai").controller("updateProfileCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s){var r=this;r.user={},e.hideLoader(),angular.element().find(".side-intro").addClass("z-depth-3");var o=e.getData("userKey"),n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.name=t.username)},onError:function(){s.notify("error","Some error have occured , please try again !")}},e.sendRequest(n)}angular.module("evalai").controller("WebCtrl",e),e.$inject=["utilities","$state","$stateParams","$rootScope"]}(),function(){"use strict";function e(e,a,t){var s=this;s.challengeCount=0,s.hostTeamCount=0,s.hostTeamExist=!1,s.participatedTeamCount=0;var r=e.getData("userKey");s.redirectUrl={};var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.name=t.username)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="challenges/challenge/present",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.challengeCount=t.results.length,0==s.hostTeamCount?s.hostTeamExist=!1:s.hostTeamExist=!0)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="hosts/challenge_host_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.hostTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),o.url="participants/participant_team",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.participatedTeamCount=t.count)},onError:function(r){var o=r.status,n=r.data;403==o?(s.error=n,a.go("web.permission-denied")):401==o&&(alert("Timeout, Please login again to continue!"),e.resetStorage(),a.go("auth.login"),t.isAuth=!1)}},e.sendRequest(o),s.hostChallenge=function(){a.go("web.challenge-host-teams")}}angular.module("evalai").controller("DashCtrl",e),e.$inject=["utilities","$state","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o){var n=this;n.challengeId=o.challengeId,n.phaseSplitId=o.phaseSplitId,n.phaseId=null,n.wrnMsg={},n.page={},n.phases={},n.phaseSplits={},n.isValid={},n.isActive=!1,n.showUpdate=!1,n.showLeaderboardUpdate=!1,n.poller=null,n.stopLeaderboard=function(){},n.isExistLoader=!1,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader=a.startLoader,n.stopLoader=a.stopLoader,n.subErrors={},e.showLoader();var i={};i.url="challenges/challenge/"+n.challengeId+"/",i.method="GET",i.data={},i.callback={onSuccess:function(e){var a=e.data;n.page=a,n.isActive=a.is_active,null===n.page.image&&(n.page.image="dist/images/logo.png")},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/challenge/"+n.challengeId+"/challenge_phase",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phases=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),i={},i.url="challenges/"+n.challengeId+"/challenge_phase_split",i.method="GET",i.data={},i.callback={onSuccess:function(a){var t=a.data;n.phaseSplits=t,e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(i),n.getLeaderboard=function(a){n.isResult=!0,n.phaseSplitId=a,n.isExistLoader=!0,n.loaderTitle="",n.loaderContainer=angular.element(".exist-team-card"),n.startLoader("Loading Leaderboard Items"),n.leaderboard={};var t={};t.url="jobs/challenge_phase_split/"+n.phaseSplitId+"/leaderboard/?page_size=1000",t.method="GET",t.data={},t.callback={onSuccess:function(e){var a=e.data;n.leaderboard=a.results,n.phase_name=n.phaseSplitId,n.stopLoader()},onError:function(e){var a=e.data;n.leaderboard.error=a,n.stopLoader()}},e.sendRequest(t)},n.phaseSplitId&&n.getLeaderboard(n.phaseSplitId)}angular.module("evalai").controller("FeaturedChallengeCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$stateParams"]}(),function(){"use strict";function e(e,a,t){var s=this;s.user={},s.challengeList=[],s.isChallenge=!0,s.isMore=!1,s.redirectUrl={},s.getChallenge=function(){var a={};a.url="challenges/challenge/present",a.method="GET",a.token=null,a.callback={onSuccess:function(e){s.challengeList=e.data,0===s.challengeList.count?s.isChallenge=!1:(s.isChallenge=!0,s.featuredChallenge=s.challengeList.results[0],s.featuredChallenge.description.length>120?s.isMore=!0:s.isMore=!1)},onError:function(){}},e.sendRequest(a)},s.init=function(){var r=e.getData("userKey");if(r){var o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(s.user.name=t.username)},onError:function(s){401==s.status&&(e.resetStorage(),t.go("auth.login"),a.isAuth=!1)}},e.sendRequest(o)}},s.hostChallenge=function(){!0===a.isAuth?t.go("web.challenge-host-teams"):(t.go("auth.login"),a.previousState="web.challenge-host-teams")},s.profileDropdown=function(){angular.element(".dropdown-button").dropdown()},s.init(),s.getChallenge()}angular.module("evalai").controller("MainCtrl",e),e.$inject=["utilities","$rootScope","$state"]}(),function(){"use strict";function e(e){var a=this,t={};t.url="web/team/",t.method="GET",t.callback={onSuccess:function(e){var t=e.status,s=e.data;if(200==t)if(0!==s.length)for(var r=[],o=[],n=0;n<s.length;n++)"Core Team"===s[n].team_type?(a.coreTeamType=s[n].team_type,a.coreTeamList=r.push(s[n])):"Contributor"===s[n].team_type&&(a.contributingTeamType=s[n].team_type,a.contributingTeamList=o.push(s[n])),a.coreTeamDetails=r,a.contributingTeamDetails=o;else a.noTeamDisplay="Team will be updated very soon !"},onError:function(){}},e.sendRequest(t,"no-header")}angular.module("evalai").controller("ourTeamCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e){this.emailError=e.getData("emailError")}angular.module("evalai").controller("PermCtrl",e),e.$inject=["utilities"]}(),function(){"use strict";function e(e,a){var t=this;t.user={},t.countLeft=0,t.compPerc=0;var s=0;e.hideLoader(),t.imgUrlObj={profilePic:"dist/images/spaceman.png"},e.getData("avatar")?t.imgUrl=e.getData("avatar"):(t.imgUrl=_.sample(t.imgUrlObj),e.storeData("avatar",t.imgUrl));var r=e.getData("userKey"),o={};o.url="auth/user/",o.method="GET",o.token=r,o.callback={onSuccess:function(e){var a=e.status,r=e.data;if(200==a){for(var o in r)""!==r[o]&&void 0!==r[o]&&null!==r[o]||(r[o]="-",t.countLeft=t.countLeft+1),s+=1;t.compPerc=parseInt(t.countLeft/s*100),t.user=r,t.user.complete=100-t.compPerc}},onError:function(){a.notify("error","Some error have occured , please try again !")}},e.sendRequest(o)}angular.module("evalai").controller("profileCtrl",e),e.$inject=["utilities","$rootScope"]}(),function(){"use strict";function e(e,a,t,s,r,o,n){var i=this,l=e.getData("userKey");e.showLoader(),i.team={},i.teamId=null,i.existTeam={},i.currentPage="",i.isNext="",i.isPrev="",i.team.error=!1,i.showPagination=!1,i.isExistLoader=!1,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader=a.startLoader,i.stopLoader=a.stopLoader,i.activateCollapsible=function(){angular.element(".collapsible").collapsible()};var u={};u.url="participants/participant_team",u.method="GET",u.token=l,u.callback={onSuccess:function(a){var t=a.status,o=a.data;200==t&&(i.existTeam=o,0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.activateCollapsible(),i.showPagination=!0,i.paginationMsg=""),e.deleteData("emailError"),null===i.existTeam.next?i.isNext="disabled":i.isNext="",null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",null!==i.existTeam.next?i.currentPage=i.existTeam.next.split("page=")[1]-1:i.currentPage=1,i.selectExistTeam=function(){i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams");var a={};a.url="challenges/challenge/1/participant_team/"+i.teamId,a.method="POST",a.token=l,a.callback={onSuccess:function(){s.go("web.challenge-page.overview"),i.stopLoader()},onError:function(){i.existTeamError="Please select a team",i.stopLoader()}},e.sendRequest(a)},i.load=function(e){if(i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".exist-team-card"),i.startLoader("Loading Teams"),null!==e){var a={Authorization:"Token "+l};r.get(e,{headers:a}).then(function(e){var a=e.data;i.existTeam=a,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader()})}else i.stopLoader()}),e.hideLoader()},onError:function(a){var t=a.data;e.storeData("emailError",t.detail),s.go("web.permission-denied"),e.hideLoader()}},e.sendRequest(u),i.createNewTeam=function(){i.isExistLoader=!0,i.loaderTitle="",i.loaderContainer=angular.element(".new-team-card"),i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="POST",a.data={team_name:i.team.name},a.token=l,a.callback={onSuccess:function(){o.notify("success","Team "+i.team.name+" has been created successfully!"),i.team.error=!1,i.stopLoader(),i.team.name="",i.startLoader("Loading Teams");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,i.showPagination=!0,i.paginationMsg="",null===i.existTeam.next?(i.isNext="disabled",i.currentPage=1):(i.isNext="",i.currentPage=i.existTeam.next.split("page=")[1]-1),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",i.stopLoader())},onError:function(){i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data;i.team.error=a.team_name[0],i.stopLoader(),o.notify("error","New team couldn't be created.")}},e.sendRequest(a)},i.confirmDelete=function(a,t){a.stopPropagation();var s=n.confirm().title("Would you like to remove yourself?").textContent("Note: This action will remove you from the team.").ariaLabel("Lucky day").targetEvent(a).ok("Yes").cancel("No");n.show(s).then(function(){i.startLoader();var a={};a.url="participants/remove_self_from_participant_team/"+t,a.method="DELETE",a.data={},a.token=l,a.callback={onSuccess:function(){i.team.error=!1,o.notify("info","You have removed yourself successfully");var a={};a.url="participants/participant_team",a.method="GET",a.token=l,a.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(i.existTeam=t,null===i.existTeam.next?(i.isNext="disabled",i.currentPage=i.existTeam.count/10):(i.isNext="",i.currentPage=parseInt(i.existTeam.next.split("page=")[1]-1)),null===i.existTeam.previous?i.isPrev="disabled":i.isPrev="",0===i.existTeam.count?(i.showPagination=!1,i.paginationMsg="No team exists for now, start by creating a new team!"):(i.showPagination=!0,i.paginationMsg="")),i.stopLoader()}},e.sendRequest(a)},onError:function(e){var a=e.data.error;i.stopLoader(),o.notify("error",a)}},e.sendRequest(a)},function(){})},i.inviteOthers=function(a,t){a.stopPropagation();var s=n.prompt().title("Invite others to this team").textContent("Enter the email address of the person").placeholder("email").ariaLabel("").targetEvent(a).ok("Send Invite").cancel("Cancel");n.show(s).then(function(a){var s={};s.url="participants/participant_team/"+t+"/invite",s.method="POST",s.data={email:a},s.token=l,s.callback={onSuccess:function(e){var a=e.data.message;o.notify("success",a)},onError:function(e){var a=e.data.error;o.notify("error",a)}},e.sendRequest(s)},function(){})}}angular.module("evalai").controller("TeamsCtrl",e),e.$inject=["utilities","loaderService","$scope","$state","$http","$rootScope","$mdDialog"]}(),function(){"use strict";function e(e,a,t,s){var r=this,o=e.getData("userKey");r.wrnMsg={},r.isValid={},r.user={},r.isFormError=!1,r.updateprofileContainer=angular.element(".update-profile-card"),r.startLoader=function(e){s.isLoader=!0,s.loaderTitle=e,
r.updateprofileContainer.addClass("low-screen")},r.stopLoader=function(){s.isLoader=!1,s.loaderTitle="",r.updateprofileContainer.removeClass("low-screen")};var n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.user=t)},onError:function(){s.notify("error","Error in loading profile, please try again later !")}},e.sendRequest(n),r.updateProfile=function(t){if(t){r.startLoader("Updating Your Profile");var n={};n.url="auth/user/",n.method="PUT",n.data={username:r.user.username,first_name:r.user.first_name,last_name:r.user.last_name},n.token=o,n.callback={onSuccess:function(e){200==e.status&&(s.notify("success","Profile updated successfully!"),a.go("web.profile"),r.stopLoader())},onError:function(e){if(400==e.status){r.stopLoader(),r.isFormError=!0;var a,t,o;try{a=void 0!==e.data.username,t=void 0!==e.data.first_name,o=void 0!==e.data.last_name,a?r.FormError=e.data.username[0]:t?r.FormError=e.data.first_name[0]:o?r.FormError=e.data.last_name[0]:s.notify("error","Some error have occured . Please try again !")}catch(e){s.notify("error","Some error have occured . Please try again !")}}r.stopLoader()}},e.sendRequest(n)}else s.notify("error","Form fields are not valid!"),r.stopLoader()}}angular.module("evalai").controller("updateProfileCtrl",e),e.$inject=["utilities","$state","$http","$rootScope"]}(),function(){"use strict";function e(e,a,t,s){var r=this;r.user={},e.hideLoader(),angular.element().find(".side-intro").addClass("z-depth-3");var o=e.getData("userKey"),n={};n.url="auth/user/",n.method="GET",n.token=o,n.callback={onSuccess:function(e){var a=e.status,t=e.data;200==a&&(r.name=t.username)},onError:function(){s.notify("error","Some error have occured , please try again !")}},e.sendRequest(n)}angular.module("evalai").controller("WebCtrl",e),e.$inject=["utilities","$state","$stateParams","$rootScope"]}();